ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"kalman.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/kalman.c"
  20              		.section	.text.KalmanFilter_Init,"ax",%progbits
  21              		.align	1
  22              		.global	KalmanFilter_Init
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	KalmanFilter_Init:
  28              	.LFB0:
   1:Core/Src/kalman.c **** /**
   2:Core/Src/kalman.c ****  * @file kalman.c
   3:Core/Src/kalman.c ****  * @brief Kalman filter implementation for rocket altitude tracking
   4:Core/Src/kalman.c ****  * @date 2025-07-05
   5:Core/Src/kalman.c ****  * @author halilsrky
   6:Core/Src/kalman.c ****  */
   7:Core/Src/kalman.c **** 
   8:Core/Src/kalman.c **** #include "kalman.h"
   9:Core/Src/kalman.c **** #include <math.h>
  10:Core/Src/kalman.c **** 
  11:Core/Src/kalman.c **** // Private functions
  12:Core/Src/kalman.c **** static void KalmanFilter_TimeUpdate(KalmanFilter_t *kf, float dt);
  13:Core/Src/kalman.c **** static void KalmanFilter_MeasurementUpdate(KalmanFilter_t *kf, float altitude, float accel);
  14:Core/Src/kalman.c **** static int KalmanFilter_DetectApogee(KalmanFilter_t *kf);
  15:Core/Src/kalman.c **** 
  16:Core/Src/kalman.c **** /**
  17:Core/Src/kalman.c ****  * @brief Initialize the Kalman filter
  18:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
  19:Core/Src/kalman.c ****  */
  20:Core/Src/kalman.c **** void KalmanFilter_Init(KalmanFilter_t *kf) {
  29              		.loc 1 20 44
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 1, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  34 0000 80B4     		push	{r7}
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 7, -4
  37 0002 85B0     		sub	sp, sp, #20
  38              		.cfi_def_cfa_offset 24
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 2


  39 0004 00AF     		add	r7, sp, #0
  40              		.cfi_def_cfa_register 7
  41 0006 7860     		str	r0, [r7, #4]
  21:Core/Src/kalman.c ****     // Initialize state vector - başlangıçta güvenli değerler
  22:Core/Src/kalman.c ****     kf->x[0] = 0.0f;  // Altitude - başlangıç irtifa
  42              		.loc 1 22 14
  43 0008 7B68     		ldr	r3, [r7, #4]
  44 000a 4FF00002 		mov	r2, #0
  45 000e 1A60     		str	r2, [r3]	@ float
  23:Core/Src/kalman.c ****     kf->x[1] = 0.0f;  // Velocity - başlangıçta hız sıfır
  46              		.loc 1 23 14
  47 0010 7B68     		ldr	r3, [r7, #4]
  48 0012 4FF00002 		mov	r2, #0
  49 0016 5A60     		str	r2, [r3, #4]	@ float
  24:Core/Src/kalman.c ****     kf->x[2] = 0.0f;  // Acceleration - başlangıçta ivme sıfır
  50              		.loc 1 24 14
  51 0018 7B68     		ldr	r3, [r7, #4]
  52 001a 4FF00002 		mov	r2, #0
  53 001e 9A60     		str	r2, [r3, #8]	@ float
  54              	.LBB2:
  25:Core/Src/kalman.c **** 
  26:Core/Src/kalman.c ****     // Initialize covariance matrix with reasonable initial uncertainty
  27:Core/Src/kalman.c ****     for (int i = 0; i < 3; i++) {
  55              		.loc 1 27 14
  56 0020 0023     		movs	r3, #0
  57 0022 FB60     		str	r3, [r7, #12]
  58              		.loc 1 27 5
  59 0024 19E0     		b	.L2
  60              	.L5:
  61              	.LBB3:
  28:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
  62              		.loc 1 28 18
  63 0026 0023     		movs	r3, #0
  64 0028 BB60     		str	r3, [r7, #8]
  65              		.loc 1 28 9
  66 002a 10E0     		b	.L3
  67              	.L4:
  29:Core/Src/kalman.c ****             kf->P[i][j] = 0.0f;
  68              		.loc 1 29 25 discriminator 3
  69 002c 7968     		ldr	r1, [r7, #4]
  70 002e FA68     		ldr	r2, [r7, #12]
  71 0030 1346     		mov	r3, r2
  72 0032 5B00     		lsls	r3, r3, #1
  73 0034 1344     		add	r3, r3, r2
  74 0036 BA68     		ldr	r2, [r7, #8]
  75 0038 1344     		add	r3, r3, r2
  76 003a 0233     		adds	r3, r3, #2
  77 003c 9B00     		lsls	r3, r3, #2
  78 003e 0B44     		add	r3, r3, r1
  79 0040 0433     		adds	r3, r3, #4
  80 0042 4FF00002 		mov	r2, #0
  81 0046 1A60     		str	r2, [r3]	@ float
  28:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
  82              		.loc 1 28 33 discriminator 3
  83 0048 BB68     		ldr	r3, [r7, #8]
  84 004a 0133     		adds	r3, r3, #1
  85 004c BB60     		str	r3, [r7, #8]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 3


  86              	.L3:
  28:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
  87              		.loc 1 28 27 discriminator 1
  88 004e BB68     		ldr	r3, [r7, #8]
  89 0050 022B     		cmp	r3, #2
  90 0052 EBDD     		ble	.L4
  91              	.LBE3:
  27:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
  92              		.loc 1 27 29 discriminator 2
  93 0054 FB68     		ldr	r3, [r7, #12]
  94 0056 0133     		adds	r3, r3, #1
  95 0058 FB60     		str	r3, [r7, #12]
  96              	.L2:
  27:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
  97              		.loc 1 27 23 discriminator 1
  98 005a FB68     		ldr	r3, [r7, #12]
  99 005c 022B     		cmp	r3, #2
 100 005e E2DD     		ble	.L5
 101              	.LBE2:
  30:Core/Src/kalman.c ****         }
  31:Core/Src/kalman.c ****     }
  32:Core/Src/kalman.c **** 
  33:Core/Src/kalman.c ****     // Başlangıç belirsizlikleri - daha konservatif değerler
  34:Core/Src/kalman.c ****     kf->P[0][0] = 1.0f;     // Altitude uncertainty (1 meter)
 102              		.loc 1 34 17
 103 0060 7B68     		ldr	r3, [r7, #4]
 104 0062 4FF07E52 		mov	r2, #1065353216
 105 0066 DA60     		str	r2, [r3, #12]	@ float
  35:Core/Src/kalman.c ****     kf->P[1][1] = 0.1f;     // Velocity uncertainty (0.1 m/s)
 106              		.loc 1 35 17
 107 0068 7B68     		ldr	r3, [r7, #4]
 108 006a 114A     		ldr	r2, .L6
 109 006c DA61     		str	r2, [r3, #28]	@ float
  36:Core/Src/kalman.c ****     kf->P[2][2] = 1.0f;     // Acceleration uncertainty (1 m/s²)
 110              		.loc 1 36 17
 111 006e 7B68     		ldr	r3, [r7, #4]
 112 0070 4FF07E52 		mov	r2, #1065353216
 113 0074 DA62     		str	r2, [r3, #44]	@ float
  37:Core/Src/kalman.c **** 
  38:Core/Src/kalman.c ****     // Set noise parameters - these can be tuned
  39:Core/Src/kalman.c ****     kf->process_noise = 0.01f;         // Process noise
 114              		.loc 1 39 23
 115 0076 7B68     		ldr	r3, [r7, #4]
 116 0078 0E4A     		ldr	r2, .L6+4
 117 007a 1A63     		str	r2, [r3, #48]	@ float
  40:Core/Src/kalman.c ****     kf->measurement_noise_alt = 0.005f;  // Altitude measurement noise
 118              		.loc 1 40 31
 119 007c 7B68     		ldr	r3, [r7, #4]
 120 007e 0E4A     		ldr	r2, .L6+8
 121 0080 5A63     		str	r2, [r3, #52]	@ float
  41:Core/Src/kalman.c ****     kf->measurement_noise_acc = 5.0f;  // Acceleration measurement noise
 122              		.loc 1 41 31
 123 0082 7B68     		ldr	r3, [r7, #4]
 124 0084 0D4A     		ldr	r2, .L6+12
 125 0086 9A63     		str	r2, [r3, #56]	@ float
  42:Core/Src/kalman.c **** 
  43:Core/Src/kalman.c ****     // Initialize apogee detection variables
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 4


  44:Core/Src/kalman.c ****     kf->apogee_detected = 0;
 126              		.loc 1 44 25
 127 0088 7B68     		ldr	r3, [r7, #4]
 128 008a 0022     		movs	r2, #0
 129 008c DA63     		str	r2, [r3, #60]
  45:Core/Src/kalman.c ****     kf->apogee_counter = 0;
 130              		.loc 1 45 24
 131 008e 7B68     		ldr	r3, [r7, #4]
 132 0090 0022     		movs	r2, #0
 133 0092 1A64     		str	r2, [r3, #64]
  46:Core/Src/kalman.c ****     kf->prev_velocity = 0.0f;
 134              		.loc 1 46 23
 135 0094 7B68     		ldr	r3, [r7, #4]
 136 0096 4FF00002 		mov	r2, #0
 137 009a 5A64     		str	r2, [r3, #68]	@ float
  47:Core/Src/kalman.c **** 
  48:Core/Src/kalman.c ****     // Mach transition control
  49:Core/Src/kalman.c ****     kf->in_mach_transition = 0;
 138              		.loc 1 49 28
 139 009c 7B68     		ldr	r3, [r7, #4]
 140 009e 0022     		movs	r2, #0
 141 00a0 9A64     		str	r2, [r3, #72]
  50:Core/Src/kalman.c **** }
 142              		.loc 1 50 1
 143 00a2 00BF     		nop
 144 00a4 1437     		adds	r7, r7, #20
 145              		.cfi_def_cfa_offset 4
 146 00a6 BD46     		mov	sp, r7
 147              		.cfi_def_cfa_register 13
 148              		@ sp needed
 149 00a8 5DF8047B 		ldr	r7, [sp], #4
 150              		.cfi_restore 7
 151              		.cfi_def_cfa_offset 0
 152 00ac 7047     		bx	lr
 153              	.L7:
 154 00ae 00BF     		.align	2
 155              	.L6:
 156 00b0 CDCCCC3D 		.word	1036831949
 157 00b4 0AD7233C 		.word	1008981770
 158 00b8 0AD7A33B 		.word	1000593162
 159 00bc 0000A040 		.word	1084227584
 160              		.cfi_endproc
 161              	.LFE0:
 163              		.section	.text.KalmanFilter_Update,"ax",%progbits
 164              		.align	1
 165              		.global	KalmanFilter_Update
 166              		.syntax unified
 167              		.thumb
 168              		.thumb_func
 170              	KalmanFilter_Update:
 171              	.LFB1:
  51:Core/Src/kalman.c **** 
  52:Core/Src/kalman.c **** /**
  53:Core/Src/kalman.c ****  * @brief Update Kalman filter with new measurements
  54:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
  55:Core/Src/kalman.c ****  * @param altitude Measured altitude (meters)
  56:Core/Src/kalman.c ****  * @param accel Measured (corrected) acceleration (m/s^2)
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 5


  57:Core/Src/kalman.c ****  * @param dt Time step (seconds)
  58:Core/Src/kalman.c ****  * @return Filtered altitude
  59:Core/Src/kalman.c ****  */
  60:Core/Src/kalman.c **** float KalmanFilter_Update(KalmanFilter_t *kf, float altitude, float accel, float dt) {
 172              		.loc 1 60 86
 173              		.cfi_startproc
 174              		@ args = 0, pretend = 0, frame = 16
 175              		@ frame_needed = 1, uses_anonymous_args = 0
 176 0000 80B5     		push	{r7, lr}
 177              		.cfi_def_cfa_offset 8
 178              		.cfi_offset 7, -8
 179              		.cfi_offset 14, -4
 180 0002 84B0     		sub	sp, sp, #16
 181              		.cfi_def_cfa_offset 24
 182 0004 00AF     		add	r7, sp, #0
 183              		.cfi_def_cfa_register 7
 184 0006 F860     		str	r0, [r7, #12]
 185 0008 87ED020A 		vstr.32	s0, [r7, #8]
 186 000c C7ED010A 		vstr.32	s1, [r7, #4]
 187 0010 87ED001A 		vstr.32	s2, [r7]
  61:Core/Src/kalman.c ****     // Check for Mach transition region (approximately 300-350 m/s)
  62:Core/Src/kalman.c ****     // Skip barometer readings in this region due to pressure anomalies
  63:Core/Src/kalman.c ****     if (fabsf(kf->x[1]) > 300.0f && fabsf(kf->x[1]) < 350.0f) {
 188              		.loc 1 63 20
 189 0014 FB68     		ldr	r3, [r7, #12]
 190 0016 D3ED017A 		vldr.32	s15, [r3, #4]
 191              		.loc 1 63 9
 192 001a F0EEE77A 		vabs.f32	s15, s15
 193              		.loc 1 63 8
 194 001e 9FED197A 		vldr.32	s14, .L16
 195 0022 F4EEC77A 		vcmpe.f32	s15, s14
 196 0026 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 197 002a 0FDD     		ble	.L9
 198              		.loc 1 63 48 discriminator 1
 199 002c FB68     		ldr	r3, [r7, #12]
 200 002e D3ED017A 		vldr.32	s15, [r3, #4]
 201              		.loc 1 63 37 discriminator 1
 202 0032 F0EEE77A 		vabs.f32	s15, s15
 203              		.loc 1 63 34 discriminator 1
 204 0036 9FED147A 		vldr.32	s14, .L16+4
 205 003a F4EEC77A 		vcmpe.f32	s15, s14
 206 003e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 207 0042 03D5     		bpl	.L9
  64:Core/Src/kalman.c ****         kf->in_mach_transition = 1;
 208              		.loc 1 64 32
 209 0044 FB68     		ldr	r3, [r7, #12]
 210 0046 0122     		movs	r2, #1
 211 0048 9A64     		str	r2, [r3, #72]
 212 004a 02E0     		b	.L12
 213              	.L9:
  65:Core/Src/kalman.c ****     } else {
  66:Core/Src/kalman.c ****         kf->in_mach_transition = 0;
 214              		.loc 1 66 32
 215 004c FB68     		ldr	r3, [r7, #12]
 216 004e 0022     		movs	r2, #0
 217 0050 9A64     		str	r2, [r3, #72]
 218              	.L12:
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 6


  67:Core/Src/kalman.c ****     }
  68:Core/Src/kalman.c **** 
  69:Core/Src/kalman.c ****     // Time update (prediction)
  70:Core/Src/kalman.c ****     KalmanFilter_TimeUpdate(kf, dt);
 219              		.loc 1 70 5
 220 0052 97ED000A 		vldr.32	s0, [r7]
 221 0056 F868     		ldr	r0, [r7, #12]
 222 0058 FFF7FEFF 		bl	KalmanFilter_TimeUpdate
  71:Core/Src/kalman.c **** 
  72:Core/Src/kalman.c ****     // Measurement update (correction)
  73:Core/Src/kalman.c ****     KalmanFilter_MeasurementUpdate(kf, altitude, accel);
 223              		.loc 1 73 5
 224 005c D7ED010A 		vldr.32	s1, [r7, #4]
 225 0060 97ED020A 		vldr.32	s0, [r7, #8]
 226 0064 F868     		ldr	r0, [r7, #12]
 227 0066 FFF7FEFF 		bl	KalmanFilter_MeasurementUpdate
  74:Core/Src/kalman.c **** 
  75:Core/Src/kalman.c ****     // Check for apogee
  76:Core/Src/kalman.c ****     KalmanFilter_DetectApogee(kf);
 228              		.loc 1 76 5
 229 006a F868     		ldr	r0, [r7, #12]
 230 006c FFF7FEFF 		bl	KalmanFilter_DetectApogee
  77:Core/Src/kalman.c **** 
  78:Core/Src/kalman.c ****     // Return filtered altitude
  79:Core/Src/kalman.c ****     return kf->x[0];
 231              		.loc 1 79 17
 232 0070 FB68     		ldr	r3, [r7, #12]
 233 0072 1B68     		ldr	r3, [r3]	@ float
 234 0074 07EE903A 		vmov	s15, r3
  80:Core/Src/kalman.c **** }
 235              		.loc 1 80 1
 236 0078 B0EE670A 		vmov.f32	s0, s15
 237 007c 1037     		adds	r7, r7, #16
 238              		.cfi_def_cfa_offset 8
 239 007e BD46     		mov	sp, r7
 240              		.cfi_def_cfa_register 13
 241              		@ sp needed
 242 0080 80BD     		pop	{r7, pc}
 243              	.L17:
 244 0082 00BF     		.align	2
 245              	.L16:
 246 0084 00009643 		.word	1133903872
 247 0088 0000AF43 		.word	1135542272
 248              		.cfi_endproc
 249              	.LFE1:
 251              		.section	.text.KalmanFilter_TimeUpdate,"ax",%progbits
 252              		.align	1
 253              		.syntax unified
 254              		.thumb
 255              		.thumb_func
 257              	KalmanFilter_TimeUpdate:
 258              	.LFB2:
  81:Core/Src/kalman.c **** 
  82:Core/Src/kalman.c **** /**
  83:Core/Src/kalman.c ****  * @brief Time update step of Kalman filter (prediction)
  84:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
  85:Core/Src/kalman.c ****  * @param dt Time step (seconds)
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 7


  86:Core/Src/kalman.c ****  */
  87:Core/Src/kalman.c **** static void KalmanFilter_TimeUpdate(KalmanFilter_t *kf, float dt) {
 259              		.loc 1 87 67
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 216
 262              		@ frame_needed = 1, uses_anonymous_args = 0
 263 0000 80B5     		push	{r7, lr}
 264              		.cfi_def_cfa_offset 8
 265              		.cfi_offset 7, -8
 266              		.cfi_offset 14, -4
 267 0002 B6B0     		sub	sp, sp, #216
 268              		.cfi_def_cfa_offset 224
 269 0004 00AF     		add	r7, sp, #0
 270              		.cfi_def_cfa_register 7
 271 0006 7860     		str	r0, [r7, #4]
 272 0008 87ED000A 		vstr.32	s0, [r7]
  88:Core/Src/kalman.c ****     float dt2 = dt * dt;
 273              		.loc 1 88 11
 274 000c D7ED007A 		vldr.32	s15, [r7]
 275 0010 67EEA77A 		vmul.f32	s15, s15, s15
 276 0014 C7ED2D7A 		vstr.32	s15, [r7, #180]
  89:Core/Src/kalman.c ****     float dt3 = dt2 * dt;
 277              		.loc 1 89 11
 278 0018 97ED2D7A 		vldr.32	s14, [r7, #180]
 279 001c D7ED007A 		vldr.32	s15, [r7]
 280 0020 67EE277A 		vmul.f32	s15, s14, s15
 281 0024 C7ED2C7A 		vstr.32	s15, [r7, #176]
  90:Core/Src/kalman.c ****     float dt4 = dt2 * dt2;
 282              		.loc 1 90 11
 283 0028 D7ED2D7A 		vldr.32	s15, [r7, #180]
 284 002c 67EEA77A 		vmul.f32	s15, s15, s15
 285 0030 C7ED2B7A 		vstr.32	s15, [r7, #172]
  91:Core/Src/kalman.c **** 
  92:Core/Src/kalman.c ****     // State transition matrix F = [1 dt dt²/2; 0 1 dt; 0 0 1]
  93:Core/Src/kalman.c ****     // State prediction: x = F*x
  94:Core/Src/kalman.c ****     float x0_new = kf->x[0] + kf->x[1] * dt + kf->x[2] * dt2 / 2.0f;
 286              		.loc 1 94 25
 287 0034 7B68     		ldr	r3, [r7, #4]
 288 0036 93ED007A 		vldr.32	s14, [r3]
 289              		.loc 1 94 36
 290 003a 7B68     		ldr	r3, [r7, #4]
 291 003c D3ED016A 		vldr.32	s13, [r3, #4]
 292              		.loc 1 94 40
 293 0040 D7ED007A 		vldr.32	s15, [r7]
 294 0044 66EEA77A 		vmul.f32	s15, s13, s15
 295              		.loc 1 94 29
 296 0048 37EE277A 		vadd.f32	s14, s14, s15
 297              		.loc 1 94 52
 298 004c 7B68     		ldr	r3, [r7, #4]
 299 004e D3ED026A 		vldr.32	s13, [r3, #8]
 300              		.loc 1 94 56
 301 0052 D7ED2D7A 		vldr.32	s15, [r7, #180]
 302 0056 66EEA76A 		vmul.f32	s13, s13, s15
 303              		.loc 1 94 62
 304 005a B0EE006A 		vmov.f32	s12, #2.0e+0
 305 005e C6EE867A 		vdiv.f32	s15, s13, s12
 306              		.loc 1 94 11
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 8


 307 0062 77EE277A 		vadd.f32	s15, s14, s15
 308 0066 C7ED2A7A 		vstr.32	s15, [r7, #168]
  95:Core/Src/kalman.c ****     float x1_new = kf->x[1] + kf->x[2] * dt;
 309              		.loc 1 95 25
 310 006a 7B68     		ldr	r3, [r7, #4]
 311 006c 93ED017A 		vldr.32	s14, [r3, #4]
 312              		.loc 1 95 36
 313 0070 7B68     		ldr	r3, [r7, #4]
 314 0072 D3ED026A 		vldr.32	s13, [r3, #8]
 315              		.loc 1 95 40
 316 0076 D7ED007A 		vldr.32	s15, [r7]
 317 007a 66EEA77A 		vmul.f32	s15, s13, s15
 318              		.loc 1 95 11
 319 007e 77EE277A 		vadd.f32	s15, s14, s15
 320 0082 C7ED297A 		vstr.32	s15, [r7, #164]
  96:Core/Src/kalman.c ****     float x2_new = kf->x[2];  // Acceleration assumed constant
 321              		.loc 1 96 11
 322 0086 7B68     		ldr	r3, [r7, #4]
 323 0088 9B68     		ldr	r3, [r3, #8]	@ float
 324 008a C7F8A030 		str	r3, [r7, #160]	@ float
  97:Core/Src/kalman.c **** 
  98:Core/Src/kalman.c ****     kf->x[0] = x0_new;
 325              		.loc 1 98 14
 326 008e 7B68     		ldr	r3, [r7, #4]
 327 0090 D7F8A820 		ldr	r2, [r7, #168]	@ float
 328 0094 1A60     		str	r2, [r3]	@ float
  99:Core/Src/kalman.c ****     kf->x[1] = x1_new;
 329              		.loc 1 99 14
 330 0096 7B68     		ldr	r3, [r7, #4]
 331 0098 D7F8A420 		ldr	r2, [r7, #164]	@ float
 332 009c 5A60     		str	r2, [r3, #4]	@ float
 100:Core/Src/kalman.c ****     kf->x[2] = x2_new;
 333              		.loc 1 100 14
 334 009e 7B68     		ldr	r3, [r7, #4]
 335 00a0 D7F8A020 		ldr	r2, [r7, #160]	@ float
 336 00a4 9A60     		str	r2, [r3, #8]	@ float
 101:Core/Src/kalman.c **** 
 102:Core/Src/kalman.c ****     // Process noise covariance Q
 103:Core/Src/kalman.c ****     float q = kf->process_noise;
 337              		.loc 1 103 11
 338 00a6 7B68     		ldr	r3, [r7, #4]
 339 00a8 1B6B     		ldr	r3, [r3, #48]	@ float
 340 00aa C7F89C30 		str	r3, [r7, #156]	@ float
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 105:Core/Src/kalman.c ****         {dt4/4.0f * q, dt3/2.0f * q, dt2/2.0f * q},
 341              		.loc 1 105 13
 342 00ae D7ED2B7A 		vldr.32	s15, [r7, #172]
 343 00b2 F1EE006A 		vmov.f32	s13, #4.0e+0
 344 00b6 87EEA67A 		vdiv.f32	s14, s15, s13
 345              		.loc 1 105 19
 346 00ba D7ED277A 		vldr.32	s15, [r7, #156]
 347 00be 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 348              		.loc 1 104 11
 349 00c2 C7ED1E7A 		vstr.32	s15, [r7, #120]
 350              		.loc 1 105 27
 351 00c6 D7ED2C7A 		vldr.32	s15, [r7, #176]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 9


 352 00ca F0EE006A 		vmov.f32	s13, #2.0e+0
 353 00ce 87EEA67A 		vdiv.f32	s14, s15, s13
 354              		.loc 1 105 33
 355 00d2 D7ED277A 		vldr.32	s15, [r7, #156]
 356 00d6 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 357              		.loc 1 104 11
 358 00da C7ED1F7A 		vstr.32	s15, [r7, #124]
 359              		.loc 1 105 41
 360 00de D7ED2D7A 		vldr.32	s15, [r7, #180]
 361 00e2 F0EE006A 		vmov.f32	s13, #2.0e+0
 362 00e6 87EEA67A 		vdiv.f32	s14, s15, s13
 363              		.loc 1 105 47
 364 00ea D7ED277A 		vldr.32	s15, [r7, #156]
 365 00ee 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 366              		.loc 1 104 11
 367 00f2 C7ED207A 		vstr.32	s15, [r7, #128]
 106:Core/Src/kalman.c ****         {dt3/2.0f * q, dt2 * q, dt * q},
 368              		.loc 1 106 13
 369 00f6 D7ED2C7A 		vldr.32	s15, [r7, #176]
 370 00fa F0EE006A 		vmov.f32	s13, #2.0e+0
 371 00fe 87EEA67A 		vdiv.f32	s14, s15, s13
 372              		.loc 1 106 19
 373 0102 D7ED277A 		vldr.32	s15, [r7, #156]
 374 0106 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 375              		.loc 1 104 11
 376 010a C7ED217A 		vstr.32	s15, [r7, #132]
 377              		.loc 1 106 28
 378 010e 97ED2D7A 		vldr.32	s14, [r7, #180]
 379 0112 D7ED277A 		vldr.32	s15, [r7, #156]
 380 0116 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 381              		.loc 1 104 11
 382 011a C7ED227A 		vstr.32	s15, [r7, #136]
 383              		.loc 1 106 36
 384 011e 97ED007A 		vldr.32	s14, [r7]
 385 0122 D7ED277A 		vldr.32	s15, [r7, #156]
 386 0126 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 387              		.loc 1 104 11
 388 012a C7ED237A 		vstr.32	s15, [r7, #140]
 107:Core/Src/kalman.c ****         {dt2/2.0f * q, dt * q, q}
 389              		.loc 1 107 13
 390 012e D7ED2D7A 		vldr.32	s15, [r7, #180]
 391 0132 F0EE006A 		vmov.f32	s13, #2.0e+0
 392 0136 87EEA67A 		vdiv.f32	s14, s15, s13
 393              		.loc 1 107 19
 394 013a D7ED277A 		vldr.32	s15, [r7, #156]
 395 013e 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 396              		.loc 1 104 11
 397 0142 C7ED247A 		vstr.32	s15, [r7, #144]
 398              		.loc 1 107 27
 399 0146 97ED007A 		vldr.32	s14, [r7]
 400 014a D7ED277A 		vldr.32	s15, [r7, #156]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 10


 401 014e 67EE277A 		vmul.f32	s15, s14, s15
 104:Core/Src/kalman.c ****     float Q[3][3] = {
 402              		.loc 1 104 11
 403 0152 C7ED257A 		vstr.32	s15, [r7, #148]
 404 0156 D7F89C30 		ldr	r3, [r7, #156]	@ float
 405 015a C7F89830 		str	r3, [r7, #152]	@ float
 108:Core/Src/kalman.c ****     };
 109:Core/Src/kalman.c **** 
 110:Core/Src/kalman.c ****     // State transition matrix F
 111:Core/Src/kalman.c ****     float F[3][3] = {
 406              		.loc 1 111 11
 407 015e 4FF07E53 		mov	r3, #1065353216
 408 0162 7B65     		str	r3, [r7, #84]	@ float
 409 0164 3B68     		ldr	r3, [r7]	@ float
 410 0166 BB65     		str	r3, [r7, #88]	@ float
 112:Core/Src/kalman.c ****         {1.0f, dt, dt2/2.0f},
 411              		.loc 1 112 23
 412 0168 97ED2D7A 		vldr.32	s14, [r7, #180]
 413 016c F0EE006A 		vmov.f32	s13, #2.0e+0
 414 0170 C7EE267A 		vdiv.f32	s15, s14, s13
 111:Core/Src/kalman.c ****         {1.0f, dt, dt2/2.0f},
 415              		.loc 1 111 11
 416 0174 C7ED177A 		vstr.32	s15, [r7, #92]
 417 0178 4FF00003 		mov	r3, #0
 418 017c 3B66     		str	r3, [r7, #96]	@ float
 419 017e 4FF07E53 		mov	r3, #1065353216
 420 0182 7B66     		str	r3, [r7, #100]	@ float
 421 0184 3B68     		ldr	r3, [r7]	@ float
 422 0186 BB66     		str	r3, [r7, #104]	@ float
 423 0188 4FF00003 		mov	r3, #0
 424 018c FB66     		str	r3, [r7, #108]	@ float
 425 018e 4FF00003 		mov	r3, #0
 426 0192 3B67     		str	r3, [r7, #112]	@ float
 427 0194 4FF07E53 		mov	r3, #1065353216
 428 0198 7B67     		str	r3, [r7, #116]	@ float
 113:Core/Src/kalman.c ****         {0.0f, 1.0f, dt},
 114:Core/Src/kalman.c ****         {0.0f, 0.0f, 1.0f}
 115:Core/Src/kalman.c ****     };
 116:Core/Src/kalman.c **** 
 117:Core/Src/kalman.c ****     // Temporary matrices for calculation
 118:Core/Src/kalman.c ****     float FP[3][3] = {0};
 429              		.loc 1 118 11
 430 019a 07F13003 		add	r3, r7, #48
 431 019e 2422     		movs	r2, #36
 432 01a0 0021     		movs	r1, #0
 433 01a2 1846     		mov	r0, r3
 434 01a4 FFF7FEFF 		bl	memset
 119:Core/Src/kalman.c ****     float FPFT[3][3] = {0};
 435              		.loc 1 119 11
 436 01a8 07F10C03 		add	r3, r7, #12
 437 01ac 2422     		movs	r2, #36
 438 01ae 0021     		movs	r1, #0
 439 01b0 1846     		mov	r0, r3
 440 01b2 FFF7FEFF 		bl	memset
 441              	.LBB4:
 120:Core/Src/kalman.c **** 
 121:Core/Src/kalman.c ****     // P = F*P*F' + Q
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 11


 122:Core/Src/kalman.c ****     // Step 1: FP = F*P
 123:Core/Src/kalman.c ****     for (int i = 0; i < 3; i++) {
 442              		.loc 1 123 14
 443 01b6 0023     		movs	r3, #0
 444 01b8 C7F8D430 		str	r3, [r7, #212]
 445              		.loc 1 123 5
 446 01bc 6AE0     		b	.L19
 447              	.L24:
 448              	.LBB5:
 124:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 449              		.loc 1 124 18
 450 01be 0023     		movs	r3, #0
 451 01c0 C7F8D030 		str	r3, [r7, #208]
 452              		.loc 1 124 9
 453 01c4 5DE0     		b	.L20
 454              	.L23:
 125:Core/Src/kalman.c ****             FP[i][j] = 0.0f;
 455              		.loc 1 125 22
 456 01c6 D7F8D420 		ldr	r2, [r7, #212]
 457 01ca 1346     		mov	r3, r2
 458 01cc 5B00     		lsls	r3, r3, #1
 459 01ce 1344     		add	r3, r3, r2
 460 01d0 D7F8D020 		ldr	r2, [r7, #208]
 461 01d4 1344     		add	r3, r3, r2
 462 01d6 9B00     		lsls	r3, r3, #2
 463 01d8 D833     		adds	r3, r3, #216
 464 01da 3B44     		add	r3, r3, r7
 465 01dc A83B     		subs	r3, r3, #168
 466 01de 4FF00002 		mov	r2, #0
 467 01e2 1A60     		str	r2, [r3]	@ float
 468              	.LBB6:
 126:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 469              		.loc 1 126 22
 470 01e4 0023     		movs	r3, #0
 471 01e6 C7F8CC30 		str	r3, [r7, #204]
 472              		.loc 1 126 13
 473 01ea 41E0     		b	.L21
 474              	.L22:
 127:Core/Src/kalman.c ****                 FP[i][j] += F[i][k] * kf->P[k][j];
 475              		.loc 1 127 22 discriminator 3
 476 01ec D7F8D420 		ldr	r2, [r7, #212]
 477 01f0 1346     		mov	r3, r2
 478 01f2 5B00     		lsls	r3, r3, #1
 479 01f4 1344     		add	r3, r3, r2
 480 01f6 D7F8D020 		ldr	r2, [r7, #208]
 481 01fa 1344     		add	r3, r3, r2
 482 01fc 9B00     		lsls	r3, r3, #2
 483 01fe D833     		adds	r3, r3, #216
 484 0200 3B44     		add	r3, r3, r7
 485 0202 A83B     		subs	r3, r3, #168
 486 0204 93ED007A 		vldr.32	s14, [r3]
 487              		.loc 1 127 33 discriminator 3
 488 0208 D7F8D420 		ldr	r2, [r7, #212]
 489 020c 1346     		mov	r3, r2
 490 020e 5B00     		lsls	r3, r3, #1
 491 0210 1344     		add	r3, r3, r2
 492 0212 D7F8CC20 		ldr	r2, [r7, #204]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 12


 493 0216 1344     		add	r3, r3, r2
 494 0218 9B00     		lsls	r3, r3, #2
 495 021a D833     		adds	r3, r3, #216
 496 021c 3B44     		add	r3, r3, r7
 497 021e 843B     		subs	r3, r3, #132
 498 0220 D3ED006A 		vldr.32	s13, [r3]
 499              		.loc 1 127 47 discriminator 3
 500 0224 7968     		ldr	r1, [r7, #4]
 501 0226 D7F8CC20 		ldr	r2, [r7, #204]
 502 022a 1346     		mov	r3, r2
 503 022c 5B00     		lsls	r3, r3, #1
 504 022e 1344     		add	r3, r3, r2
 505 0230 D7F8D020 		ldr	r2, [r7, #208]
 506 0234 1344     		add	r3, r3, r2
 507 0236 0233     		adds	r3, r3, #2
 508 0238 9B00     		lsls	r3, r3, #2
 509 023a 0B44     		add	r3, r3, r1
 510 023c 0433     		adds	r3, r3, #4
 511 023e D3ED007A 		vldr.32	s15, [r3]
 512              		.loc 1 127 37 discriminator 3
 513 0242 66EEA77A 		vmul.f32	s15, s13, s15
 514              		.loc 1 127 26 discriminator 3
 515 0246 77EE277A 		vadd.f32	s15, s14, s15
 516 024a D7F8D420 		ldr	r2, [r7, #212]
 517 024e 1346     		mov	r3, r2
 518 0250 5B00     		lsls	r3, r3, #1
 519 0252 1344     		add	r3, r3, r2
 520 0254 D7F8D020 		ldr	r2, [r7, #208]
 521 0258 1344     		add	r3, r3, r2
 522 025a 9B00     		lsls	r3, r3, #2
 523 025c D833     		adds	r3, r3, #216
 524 025e 3B44     		add	r3, r3, r7
 525 0260 A83B     		subs	r3, r3, #168
 526 0262 C3ED007A 		vstr.32	s15, [r3]
 126:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 527              		.loc 1 126 37 discriminator 3
 528 0266 D7F8CC30 		ldr	r3, [r7, #204]
 529 026a 0133     		adds	r3, r3, #1
 530 026c C7F8CC30 		str	r3, [r7, #204]
 531              	.L21:
 126:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 532              		.loc 1 126 31 discriminator 1
 533 0270 D7F8CC30 		ldr	r3, [r7, #204]
 534 0274 022B     		cmp	r3, #2
 535 0276 B9DD     		ble	.L22
 536              	.LBE6:
 124:Core/Src/kalman.c ****             FP[i][j] = 0.0f;
 537              		.loc 1 124 33 discriminator 2
 538 0278 D7F8D030 		ldr	r3, [r7, #208]
 539 027c 0133     		adds	r3, r3, #1
 540 027e C7F8D030 		str	r3, [r7, #208]
 541              	.L20:
 124:Core/Src/kalman.c ****             FP[i][j] = 0.0f;
 542              		.loc 1 124 27 discriminator 1
 543 0282 D7F8D030 		ldr	r3, [r7, #208]
 544 0286 022B     		cmp	r3, #2
 545 0288 9DDD     		ble	.L23
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 13


 546              	.LBE5:
 123:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 547              		.loc 1 123 29 discriminator 2
 548 028a D7F8D430 		ldr	r3, [r7, #212]
 549 028e 0133     		adds	r3, r3, #1
 550 0290 C7F8D430 		str	r3, [r7, #212]
 551              	.L19:
 123:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 552              		.loc 1 123 23 discriminator 1
 553 0294 D7F8D430 		ldr	r3, [r7, #212]
 554 0298 022B     		cmp	r3, #2
 555 029a 90DD     		ble	.L24
 556              	.LBE4:
 557              	.LBB7:
 128:Core/Src/kalman.c ****             }
 129:Core/Src/kalman.c ****         }
 130:Core/Src/kalman.c ****     }
 131:Core/Src/kalman.c **** 
 132:Core/Src/kalman.c ****     // Step 2: FPFT = FP*F'
 133:Core/Src/kalman.c ****     for (int i = 0; i < 3; i++) {
 558              		.loc 1 133 14
 559 029c 0023     		movs	r3, #0
 560 029e C7F8C830 		str	r3, [r7, #200]
 561              		.loc 1 133 5
 562 02a2 69E0     		b	.L25
 563              	.L30:
 564              	.LBB8:
 134:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 565              		.loc 1 134 18
 566 02a4 0023     		movs	r3, #0
 567 02a6 C7F8C430 		str	r3, [r7, #196]
 568              		.loc 1 134 9
 569 02aa 5CE0     		b	.L26
 570              	.L29:
 135:Core/Src/kalman.c ****             FPFT[i][j] = 0.0f;
 571              		.loc 1 135 24
 572 02ac D7F8C820 		ldr	r2, [r7, #200]
 573 02b0 1346     		mov	r3, r2
 574 02b2 5B00     		lsls	r3, r3, #1
 575 02b4 1344     		add	r3, r3, r2
 576 02b6 D7F8C420 		ldr	r2, [r7, #196]
 577 02ba 1344     		add	r3, r3, r2
 578 02bc 9B00     		lsls	r3, r3, #2
 579 02be D833     		adds	r3, r3, #216
 580 02c0 3B44     		add	r3, r3, r7
 581 02c2 CC3B     		subs	r3, r3, #204
 582 02c4 4FF00002 		mov	r2, #0
 583 02c8 1A60     		str	r2, [r3]	@ float
 584              	.LBB9:
 136:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 585              		.loc 1 136 22
 586 02ca 0023     		movs	r3, #0
 587 02cc C7F8C030 		str	r3, [r7, #192]
 588              		.loc 1 136 13
 589 02d0 40E0     		b	.L27
 590              	.L28:
 137:Core/Src/kalman.c ****                 FPFT[i][j] += FP[i][k] * F[j][k];  // F'[k][j] = F[j][k]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 14


 591              		.loc 1 137 24 discriminator 3
 592 02d2 D7F8C820 		ldr	r2, [r7, #200]
 593 02d6 1346     		mov	r3, r2
 594 02d8 5B00     		lsls	r3, r3, #1
 595 02da 1344     		add	r3, r3, r2
 596 02dc D7F8C420 		ldr	r2, [r7, #196]
 597 02e0 1344     		add	r3, r3, r2
 598 02e2 9B00     		lsls	r3, r3, #2
 599 02e4 D833     		adds	r3, r3, #216
 600 02e6 3B44     		add	r3, r3, r7
 601 02e8 CC3B     		subs	r3, r3, #204
 602 02ea 93ED007A 		vldr.32	s14, [r3]
 603              		.loc 1 137 36 discriminator 3
 604 02ee D7F8C820 		ldr	r2, [r7, #200]
 605 02f2 1346     		mov	r3, r2
 606 02f4 5B00     		lsls	r3, r3, #1
 607 02f6 1344     		add	r3, r3, r2
 608 02f8 D7F8C020 		ldr	r2, [r7, #192]
 609 02fc 1344     		add	r3, r3, r2
 610 02fe 9B00     		lsls	r3, r3, #2
 611 0300 D833     		adds	r3, r3, #216
 612 0302 3B44     		add	r3, r3, r7
 613 0304 A83B     		subs	r3, r3, #168
 614 0306 D3ED006A 		vldr.32	s13, [r3]
 615              		.loc 1 137 46 discriminator 3
 616 030a D7F8C420 		ldr	r2, [r7, #196]
 617 030e 1346     		mov	r3, r2
 618 0310 5B00     		lsls	r3, r3, #1
 619 0312 1344     		add	r3, r3, r2
 620 0314 D7F8C020 		ldr	r2, [r7, #192]
 621 0318 1344     		add	r3, r3, r2
 622 031a 9B00     		lsls	r3, r3, #2
 623 031c D833     		adds	r3, r3, #216
 624 031e 3B44     		add	r3, r3, r7
 625 0320 843B     		subs	r3, r3, #132
 626 0322 D3ED007A 		vldr.32	s15, [r3]
 627              		.loc 1 137 40 discriminator 3
 628 0326 66EEA77A 		vmul.f32	s15, s13, s15
 629              		.loc 1 137 28 discriminator 3
 630 032a 77EE277A 		vadd.f32	s15, s14, s15
 631 032e D7F8C820 		ldr	r2, [r7, #200]
 632 0332 1346     		mov	r3, r2
 633 0334 5B00     		lsls	r3, r3, #1
 634 0336 1344     		add	r3, r3, r2
 635 0338 D7F8C420 		ldr	r2, [r7, #196]
 636 033c 1344     		add	r3, r3, r2
 637 033e 9B00     		lsls	r3, r3, #2
 638 0340 D833     		adds	r3, r3, #216
 639 0342 3B44     		add	r3, r3, r7
 640 0344 CC3B     		subs	r3, r3, #204
 641 0346 C3ED007A 		vstr.32	s15, [r3]
 136:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 642              		.loc 1 136 37 discriminator 3
 643 034a D7F8C030 		ldr	r3, [r7, #192]
 644 034e 0133     		adds	r3, r3, #1
 645 0350 C7F8C030 		str	r3, [r7, #192]
 646              	.L27:
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 15


 136:Core/Src/kalman.c ****             for (int k = 0; k < 3; k++) {
 647              		.loc 1 136 31 discriminator 1
 648 0354 D7F8C030 		ldr	r3, [r7, #192]
 649 0358 022B     		cmp	r3, #2
 650 035a BADD     		ble	.L28
 651              	.LBE9:
 134:Core/Src/kalman.c ****             FPFT[i][j] = 0.0f;
 652              		.loc 1 134 33 discriminator 2
 653 035c D7F8C430 		ldr	r3, [r7, #196]
 654 0360 0133     		adds	r3, r3, #1
 655 0362 C7F8C430 		str	r3, [r7, #196]
 656              	.L26:
 134:Core/Src/kalman.c ****             FPFT[i][j] = 0.0f;
 657              		.loc 1 134 27 discriminator 1
 658 0366 D7F8C430 		ldr	r3, [r7, #196]
 659 036a 022B     		cmp	r3, #2
 660 036c 9EDD     		ble	.L29
 661              	.LBE8:
 133:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 662              		.loc 1 133 29 discriminator 2
 663 036e D7F8C830 		ldr	r3, [r7, #200]
 664 0372 0133     		adds	r3, r3, #1
 665 0374 C7F8C830 		str	r3, [r7, #200]
 666              	.L25:
 133:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 667              		.loc 1 133 23 discriminator 1
 668 0378 D7F8C830 		ldr	r3, [r7, #200]
 669 037c 022B     		cmp	r3, #2
 670 037e 91DD     		ble	.L30
 671              	.LBE7:
 672              	.LBB10:
 138:Core/Src/kalman.c ****             }
 139:Core/Src/kalman.c ****         }
 140:Core/Src/kalman.c ****     }
 141:Core/Src/kalman.c **** 
 142:Core/Src/kalman.c ****     // Step 3: P = FPFT + Q
 143:Core/Src/kalman.c ****     for (int i = 0; i < 3; i++) {
 673              		.loc 1 143 14
 674 0380 0023     		movs	r3, #0
 675 0382 C7F8BC30 		str	r3, [r7, #188]
 676              		.loc 1 143 5
 677 0386 3EE0     		b	.L31
 678              	.L34:
 679              	.LBB11:
 144:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 680              		.loc 1 144 18
 681 0388 0023     		movs	r3, #0
 682 038a C7F8B830 		str	r3, [r7, #184]
 683              		.loc 1 144 9
 684 038e 31E0     		b	.L32
 685              	.L33:
 145:Core/Src/kalman.c ****             kf->P[i][j] = FPFT[i][j] + Q[i][j];
 686              		.loc 1 145 34 discriminator 3
 687 0390 D7F8BC20 		ldr	r2, [r7, #188]
 688 0394 1346     		mov	r3, r2
 689 0396 5B00     		lsls	r3, r3, #1
 690 0398 1344     		add	r3, r3, r2
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 16


 691 039a D7F8B820 		ldr	r2, [r7, #184]
 692 039e 1344     		add	r3, r3, r2
 693 03a0 9B00     		lsls	r3, r3, #2
 694 03a2 D833     		adds	r3, r3, #216
 695 03a4 3B44     		add	r3, r3, r7
 696 03a6 CC3B     		subs	r3, r3, #204
 697 03a8 93ED007A 		vldr.32	s14, [r3]
 698              		.loc 1 145 44 discriminator 3
 699 03ac D7F8BC20 		ldr	r2, [r7, #188]
 700 03b0 1346     		mov	r3, r2
 701 03b2 5B00     		lsls	r3, r3, #1
 702 03b4 1344     		add	r3, r3, r2
 703 03b6 D7F8B820 		ldr	r2, [r7, #184]
 704 03ba 1344     		add	r3, r3, r2
 705 03bc 9B00     		lsls	r3, r3, #2
 706 03be D833     		adds	r3, r3, #216
 707 03c0 3B44     		add	r3, r3, r7
 708 03c2 603B     		subs	r3, r3, #96
 709 03c4 D3ED007A 		vldr.32	s15, [r3]
 710              		.loc 1 145 38 discriminator 3
 711 03c8 77EE277A 		vadd.f32	s15, s14, s15
 712              		.loc 1 145 25 discriminator 3
 713 03cc 7968     		ldr	r1, [r7, #4]
 714 03ce D7F8BC20 		ldr	r2, [r7, #188]
 715 03d2 1346     		mov	r3, r2
 716 03d4 5B00     		lsls	r3, r3, #1
 717 03d6 1344     		add	r3, r3, r2
 718 03d8 D7F8B820 		ldr	r2, [r7, #184]
 719 03dc 1344     		add	r3, r3, r2
 720 03de 0233     		adds	r3, r3, #2
 721 03e0 9B00     		lsls	r3, r3, #2
 722 03e2 0B44     		add	r3, r3, r1
 723 03e4 0433     		adds	r3, r3, #4
 724 03e6 C3ED007A 		vstr.32	s15, [r3]
 144:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 725              		.loc 1 144 33 discriminator 3
 726 03ea D7F8B830 		ldr	r3, [r7, #184]
 727 03ee 0133     		adds	r3, r3, #1
 728 03f0 C7F8B830 		str	r3, [r7, #184]
 729              	.L32:
 144:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 730              		.loc 1 144 27 discriminator 1
 731 03f4 D7F8B830 		ldr	r3, [r7, #184]
 732 03f8 022B     		cmp	r3, #2
 733 03fa C9DD     		ble	.L33
 734              	.LBE11:
 143:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 735              		.loc 1 143 29 discriminator 2
 736 03fc D7F8BC30 		ldr	r3, [r7, #188]
 737 0400 0133     		adds	r3, r3, #1
 738 0402 C7F8BC30 		str	r3, [r7, #188]
 739              	.L31:
 143:Core/Src/kalman.c ****         for (int j = 0; j < 3; j++) {
 740              		.loc 1 143 23 discriminator 1
 741 0406 D7F8BC30 		ldr	r3, [r7, #188]
 742 040a 022B     		cmp	r3, #2
 743 040c BCDD     		ble	.L34
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 17


 744              	.LBE10:
 146:Core/Src/kalman.c ****         }
 147:Core/Src/kalman.c ****     }
 148:Core/Src/kalman.c **** }
 745              		.loc 1 148 1
 746 040e 00BF     		nop
 747 0410 00BF     		nop
 748 0412 D837     		adds	r7, r7, #216
 749              		.cfi_def_cfa_offset 8
 750 0414 BD46     		mov	sp, r7
 751              		.cfi_def_cfa_register 13
 752              		@ sp needed
 753 0416 80BD     		pop	{r7, pc}
 754              		.cfi_endproc
 755              	.LFE2:
 757              		.section	.rodata
 758              		.align	2
 759              	.LC0:
 760 0000 0000803F 		.word	1065353216
 761 0004 00000000 		.word	0
 762 0008 00000000 		.word	0
 763 000c 00000000 		.word	0
 764 0010 00000000 		.word	0
 765 0014 0000803F 		.word	1065353216
 766              		.section	.text.KalmanFilter_MeasurementUpdate,"ax",%progbits
 767              		.align	1
 768              		.syntax unified
 769              		.thumb
 770              		.thumb_func
 772              	KalmanFilter_MeasurementUpdate:
 773              	.LFB3:
 149:Core/Src/kalman.c **** 
 150:Core/Src/kalman.c **** /**
 151:Core/Src/kalman.c ****  * @brief Measurement update step of Kalman filter (correction)
 152:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
 153:Core/Src/kalman.c ****  * @param altitude Measured altitude (meters)
 154:Core/Src/kalman.c ****  * @param accel Measured (corrected) acceleration (m/s^2)
 155:Core/Src/kalman.c ****  */
 156:Core/Src/kalman.c **** static void KalmanFilter_MeasurementUpdate(KalmanFilter_t *kf, float altitude, float accel) {
 774              		.loc 1 156 93
 775              		.cfi_startproc
 776              		@ args = 0, pretend = 0, frame = 472
 777              		@ frame_needed = 1, uses_anonymous_args = 0
 778 0000 B0B5     		push	{r4, r5, r7, lr}
 779              		.cfi_def_cfa_offset 16
 780              		.cfi_offset 4, -16
 781              		.cfi_offset 5, -12
 782              		.cfi_offset 7, -8
 783              		.cfi_offset 14, -4
 784 0002 F6B0     		sub	sp, sp, #472
 785              		.cfi_def_cfa_offset 488
 786 0004 00AF     		add	r7, sp, #0
 787              		.cfi_def_cfa_register 7
 788 0006 07F5EC73 		add	r3, r7, #472
 789 000a A3F5E673 		sub	r3, r3, #460
 790 000e 1860     		str	r0, [r3]
 791 0010 07F5EC73 		add	r3, r7, #472
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 18


 792 0014 A3F5E873 		sub	r3, r3, #464
 793 0018 83ED000A 		vstr.32	s0, [r3]
 794 001c 07F5EC73 		add	r3, r7, #472
 795 0020 A3F5EA73 		sub	r3, r3, #468
 796 0024 C3ED000A 		vstr.32	s1, [r3]
 157:Core/Src/kalman.c ****     // In Mach transition region, only use acceleration measurement
 158:Core/Src/kalman.c ****     if (kf->in_mach_transition) {
 797              		.loc 1 158 11
 798 0028 07F5EC73 		add	r3, r7, #472
 799 002c A3F5E673 		sub	r3, r3, #460
 800 0030 1B68     		ldr	r3, [r3]
 801 0032 9B6C     		ldr	r3, [r3, #72]
 802              		.loc 1 158 8
 803 0034 002B     		cmp	r3, #0
 804 0036 00F06B82 		beq	.L36
 805              	.LBB12:
 159:Core/Src/kalman.c ****         // Only use acceleration measurement
 160:Core/Src/kalman.c ****         // H = [0 0 1]
 161:Core/Src/kalman.c ****         float H[1][3] = {{0.0f, 0.0f, 1.0f}};
 806              		.loc 1 161 15
 807 003a 4FF00003 		mov	r3, #0
 808 003e C7F83831 		str	r3, [r7, #312]	@ float
 809 0042 4FF00003 		mov	r3, #0
 810 0046 C7F83C31 		str	r3, [r7, #316]	@ float
 811 004a 4FF07E53 		mov	r3, #1065353216
 812 004e C7F84031 		str	r3, [r7, #320]	@ float
 162:Core/Src/kalman.c ****         float z = accel;
 813              		.loc 1 162 15
 814 0052 07F5EC73 		add	r3, r7, #472
 815 0056 A3F5EA73 		sub	r3, r3, #468
 816 005a 1B68     		ldr	r3, [r3]	@ float
 817 005c C7F85031 		str	r3, [r7, #336]	@ float
 163:Core/Src/kalman.c ****         float y = z - kf->x[2];  // Innovation
 818              		.loc 1 163 28
 819 0060 07F5EC73 		add	r3, r7, #472
 820 0064 A3F5E673 		sub	r3, r3, #460
 821 0068 1B68     		ldr	r3, [r3]
 822 006a D3ED027A 		vldr.32	s15, [r3, #8]
 823              		.loc 1 163 15
 824 006e 97ED547A 		vldr.32	s14, [r7, #336]
 825 0072 77EE677A 		vsub.f32	s15, s14, s15
 826 0076 C7ED537A 		vstr.32	s15, [r7, #332]
 164:Core/Src/kalman.c **** 
 165:Core/Src/kalman.c ****         // S = H*P*H' + R
 166:Core/Src/kalman.c ****         float HP[1][3] = {0};
 827              		.loc 1 166 15
 828 007a 07F59673 		add	r3, r7, #300
 829 007e 0022     		movs	r2, #0
 830 0080 1A60     		str	r2, [r3]
 831 0082 5A60     		str	r2, [r3, #4]
 832 0084 9A60     		str	r2, [r3, #8]
 167:Core/Src/kalman.c ****         float S = 0.0f;
 833              		.loc 1 167 15
 834 0086 4FF00003 		mov	r3, #0
 835 008a C7F84831 		str	r3, [r7, #328]	@ float
 836              	.LBB13:
 168:Core/Src/kalman.c **** 
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 19


 169:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 837              		.loc 1 169 18
 838 008e 0023     		movs	r3, #0
 839 0090 C7F8D431 		str	r3, [r7, #468]
 840              		.loc 1 169 9
 841 0094 44E0     		b	.L37
 842              	.L38:
 170:Core/Src/kalman.c ****             HP[0][i] = H[0][0]*kf->P[0][i] + H[0][1]*kf->P[1][i] + H[0][2]*kf->P[2][i];
 843              		.loc 1 170 28 discriminator 3
 844 0096 97ED4E7A 		vldr.32	s14, [r7, #312]
 845              		.loc 1 170 40 discriminator 3
 846 009a 07F5EC73 		add	r3, r7, #472
 847 009e A3F5E673 		sub	r3, r3, #460
 848 00a2 1A68     		ldr	r2, [r3]
 849 00a4 D7F8D431 		ldr	r3, [r7, #468]
 850 00a8 0233     		adds	r3, r3, #2
 851 00aa 9B00     		lsls	r3, r3, #2
 852 00ac 1344     		add	r3, r3, r2
 853 00ae 0433     		adds	r3, r3, #4
 854 00b0 D3ED007A 		vldr.32	s15, [r3]
 855              		.loc 1 170 31 discriminator 3
 856 00b4 27EE277A 		vmul.f32	s14, s14, s15
 857              		.loc 1 170 50 discriminator 3
 858 00b8 D7ED4F6A 		vldr.32	s13, [r7, #316]
 859              		.loc 1 170 62 discriminator 3
 860 00bc 07F5EC73 		add	r3, r7, #472
 861 00c0 A3F5E673 		sub	r3, r3, #460
 862 00c4 1A68     		ldr	r2, [r3]
 863 00c6 D7F8D431 		ldr	r3, [r7, #468]
 864 00ca 0533     		adds	r3, r3, #5
 865 00cc 9B00     		lsls	r3, r3, #2
 866 00ce 1344     		add	r3, r3, r2
 867 00d0 0433     		adds	r3, r3, #4
 868 00d2 D3ED007A 		vldr.32	s15, [r3]
 869              		.loc 1 170 53 discriminator 3
 870 00d6 66EEA77A 		vmul.f32	s15, s13, s15
 871              		.loc 1 170 44 discriminator 3
 872 00da 37EE277A 		vadd.f32	s14, s14, s15
 873              		.loc 1 170 72 discriminator 3
 874 00de D7ED506A 		vldr.32	s13, [r7, #320]
 875              		.loc 1 170 84 discriminator 3
 876 00e2 07F5EC73 		add	r3, r7, #472
 877 00e6 A3F5E673 		sub	r3, r3, #460
 878 00ea 1A68     		ldr	r2, [r3]
 879 00ec D7F8D431 		ldr	r3, [r7, #468]
 880 00f0 0833     		adds	r3, r3, #8
 881 00f2 9B00     		lsls	r3, r3, #2
 882 00f4 1344     		add	r3, r3, r2
 883 00f6 0433     		adds	r3, r3, #4
 884 00f8 D3ED007A 		vldr.32	s15, [r3]
 885              		.loc 1 170 75 discriminator 3
 886 00fc 66EEA77A 		vmul.f32	s15, s13, s15
 887              		.loc 1 170 66 discriminator 3
 888 0100 77EE277A 		vadd.f32	s15, s14, s15
 889              		.loc 1 170 22 discriminator 3
 890 0104 D7F8D431 		ldr	r3, [r7, #468]
 891 0108 9B00     		lsls	r3, r3, #2
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 20


 892 010a 03F5EC73 		add	r3, r3, #472
 893 010e 3B44     		add	r3, r3, r7
 894 0110 AC3B     		subs	r3, r3, #172
 895 0112 C3ED007A 		vstr.32	s15, [r3]
 169:Core/Src/kalman.c ****             HP[0][i] = H[0][0]*kf->P[0][i] + H[0][1]*kf->P[1][i] + H[0][2]*kf->P[2][i];
 896              		.loc 1 169 33 discriminator 3
 897 0116 D7F8D431 		ldr	r3, [r7, #468]
 898 011a 0133     		adds	r3, r3, #1
 899 011c C7F8D431 		str	r3, [r7, #468]
 900              	.L37:
 169:Core/Src/kalman.c ****             HP[0][i] = H[0][0]*kf->P[0][i] + H[0][1]*kf->P[1][i] + H[0][2]*kf->P[2][i];
 901              		.loc 1 169 27 discriminator 1
 902 0120 D7F8D431 		ldr	r3, [r7, #468]
 903 0124 022B     		cmp	r3, #2
 904 0126 B6DD     		ble	.L38
 905              	.LBE13:
 171:Core/Src/kalman.c ****         }
 172:Core/Src/kalman.c **** 
 173:Core/Src/kalman.c ****         S = HP[0][0]*H[0][0] + HP[0][1]*H[0][1] + HP[0][2]*H[0][2] + kf->measurement_noise_acc;
 906              		.loc 1 173 18
 907 0128 97ED4B7A 		vldr.32	s14, [r7, #300]
 908              		.loc 1 173 26
 909 012c D7ED4E7A 		vldr.32	s15, [r7, #312]
 910              		.loc 1 173 21
 911 0130 27EE277A 		vmul.f32	s14, s14, s15
 912              		.loc 1 173 37
 913 0134 D7ED4C6A 		vldr.32	s13, [r7, #304]
 914              		.loc 1 173 45
 915 0138 D7ED4F7A 		vldr.32	s15, [r7, #316]
 916              		.loc 1 173 40
 917 013c 66EEA77A 		vmul.f32	s15, s13, s15
 918              		.loc 1 173 30
 919 0140 37EE277A 		vadd.f32	s14, s14, s15
 920              		.loc 1 173 56
 921 0144 D7ED4D6A 		vldr.32	s13, [r7, #308]
 922              		.loc 1 173 64
 923 0148 D7ED507A 		vldr.32	s15, [r7, #320]
 924              		.loc 1 173 59
 925 014c 66EEA77A 		vmul.f32	s15, s13, s15
 926              		.loc 1 173 49
 927 0150 37EE277A 		vadd.f32	s14, s14, s15
 928              		.loc 1 173 72
 929 0154 07F5EC73 		add	r3, r7, #472
 930 0158 A3F5E673 		sub	r3, r3, #460
 931 015c 1B68     		ldr	r3, [r3]
 932 015e D3ED0E7A 		vldr.32	s15, [r3, #56]
 933              		.loc 1 173 11
 934 0162 77EE277A 		vadd.f32	s15, s14, s15
 935 0166 C7ED527A 		vstr.32	s15, [r7, #328]
 174:Core/Src/kalman.c **** 
 175:Core/Src/kalman.c ****         // K = P*H'*S^-1
 176:Core/Src/kalman.c ****         float K[3] = {0};
 936              		.loc 1 176 15
 937 016a 07F59073 		add	r3, r7, #288
 938 016e 0022     		movs	r2, #0
 939 0170 1A60     		str	r2, [r3]
 940 0172 5A60     		str	r2, [r3, #4]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 21


 941 0174 9A60     		str	r2, [r3, #8]
 177:Core/Src/kalman.c ****         float S_inv = 1.0f / S;
 942              		.loc 1 177 15
 943 0176 F7EE006A 		vmov.f32	s13, #1.0e+0
 944 017a 97ED527A 		vldr.32	s14, [r7, #328]
 945 017e C6EE877A 		vdiv.f32	s15, s13, s14
 946 0182 C7ED517A 		vstr.32	s15, [r7, #324]
 947              	.LBB14:
 178:Core/Src/kalman.c **** 
 179:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 948              		.loc 1 179 18
 949 0186 0023     		movs	r3, #0
 950 0188 C7F8D031 		str	r3, [r7, #464]
 951              		.loc 1 179 9
 952 018c 4FE0     		b	.L39
 953              	.L40:
 180:Core/Src/kalman.c ****             K[i] = (kf->P[i][0]*H[0][0] + kf->P[i][1]*H[0][1] + kf->P[i][2]*H[0][2]) * S_inv;
 954              		.loc 1 180 29 discriminator 3
 955 018e 07F5EC73 		add	r3, r7, #472
 956 0192 A3F5E673 		sub	r3, r3, #460
 957 0196 1968     		ldr	r1, [r3]
 958 0198 D7F8D021 		ldr	r2, [r7, #464]
 959 019c 1346     		mov	r3, r2
 960 019e 5B00     		lsls	r3, r3, #1
 961 01a0 1344     		add	r3, r3, r2
 962 01a2 9B00     		lsls	r3, r3, #2
 963 01a4 0B44     		add	r3, r3, r1
 964 01a6 0C33     		adds	r3, r3, #12
 965 01a8 93ED007A 		vldr.32	s14, [r3]
 966              		.loc 1 180 37 discriminator 3
 967 01ac D7ED4E7A 		vldr.32	s15, [r7, #312]
 968              		.loc 1 180 32 discriminator 3
 969 01b0 27EE277A 		vmul.f32	s14, s14, s15
 970              		.loc 1 180 51 discriminator 3
 971 01b4 07F5EC73 		add	r3, r7, #472
 972 01b8 A3F5E673 		sub	r3, r3, #460
 973 01bc 1968     		ldr	r1, [r3]
 974 01be D7F8D031 		ldr	r3, [r7, #464]
 975 01c2 5A1C     		adds	r2, r3, #1
 976 01c4 1346     		mov	r3, r2
 977 01c6 5B00     		lsls	r3, r3, #1
 978 01c8 1344     		add	r3, r3, r2
 979 01ca 9B00     		lsls	r3, r3, #2
 980 01cc 0B44     		add	r3, r3, r1
 981 01ce 0433     		adds	r3, r3, #4
 982 01d0 D3ED006A 		vldr.32	s13, [r3]
 983              		.loc 1 180 59 discriminator 3
 984 01d4 D7ED4F7A 		vldr.32	s15, [r7, #316]
 985              		.loc 1 180 54 discriminator 3
 986 01d8 66EEA77A 		vmul.f32	s15, s13, s15
 987              		.loc 1 180 41 discriminator 3
 988 01dc 37EE277A 		vadd.f32	s14, s14, s15
 989              		.loc 1 180 73 discriminator 3
 990 01e0 07F5EC73 		add	r3, r7, #472
 991 01e4 A3F5E673 		sub	r3, r3, #460
 992 01e8 1968     		ldr	r1, [r3]
 993 01ea D7F8D021 		ldr	r2, [r7, #464]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 22


 994 01ee 1346     		mov	r3, r2
 995 01f0 5B00     		lsls	r3, r3, #1
 996 01f2 1344     		add	r3, r3, r2
 997 01f4 9B00     		lsls	r3, r3, #2
 998 01f6 0B44     		add	r3, r3, r1
 999 01f8 1433     		adds	r3, r3, #20
 1000 01fa D3ED006A 		vldr.32	s13, [r3]
 1001              		.loc 1 180 81 discriminator 3
 1002 01fe D7ED507A 		vldr.32	s15, [r7, #320]
 1003              		.loc 1 180 76 discriminator 3
 1004 0202 66EEA77A 		vmul.f32	s15, s13, s15
 1005              		.loc 1 180 63 discriminator 3
 1006 0206 37EE277A 		vadd.f32	s14, s14, s15
 1007              		.loc 1 180 86 discriminator 3
 1008 020a D7ED517A 		vldr.32	s15, [r7, #324]
 1009 020e 67EE277A 		vmul.f32	s15, s14, s15
 1010              		.loc 1 180 18 discriminator 3
 1011 0212 D7F8D031 		ldr	r3, [r7, #464]
 1012 0216 9B00     		lsls	r3, r3, #2
 1013 0218 03F5EC73 		add	r3, r3, #472
 1014 021c 3B44     		add	r3, r3, r7
 1015 021e B83B     		subs	r3, r3, #184
 1016 0220 C3ED007A 		vstr.32	s15, [r3]
 179:Core/Src/kalman.c ****             K[i] = (kf->P[i][0]*H[0][0] + kf->P[i][1]*H[0][1] + kf->P[i][2]*H[0][2]) * S_inv;
 1017              		.loc 1 179 33 discriminator 3
 1018 0224 D7F8D031 		ldr	r3, [r7, #464]
 1019 0228 0133     		adds	r3, r3, #1
 1020 022a C7F8D031 		str	r3, [r7, #464]
 1021              	.L39:
 179:Core/Src/kalman.c ****             K[i] = (kf->P[i][0]*H[0][0] + kf->P[i][1]*H[0][1] + kf->P[i][2]*H[0][2]) * S_inv;
 1022              		.loc 1 179 27 discriminator 1
 1023 022e D7F8D031 		ldr	r3, [r7, #464]
 1024 0232 022B     		cmp	r3, #2
 1025 0234 ABDD     		ble	.L40
 1026              	.LBE14:
 1027              	.LBB15:
 181:Core/Src/kalman.c ****         }
 182:Core/Src/kalman.c **** 
 183:Core/Src/kalman.c ****         // State update: x = x + K*y
 184:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1028              		.loc 1 184 18
 1029 0236 0023     		movs	r3, #0
 1030 0238 C7F8CC31 		str	r3, [r7, #460]
 1031              		.loc 1 184 9
 1032 023c 29E0     		b	.L41
 1033              	.L42:
 185:Core/Src/kalman.c ****             kf->x[i] += K[i] * y;
 1034              		.loc 1 185 18 discriminator 3
 1035 023e 07F5EC73 		add	r3, r7, #472
 1036 0242 A3F5E673 		sub	r3, r3, #460
 1037 0246 1A68     		ldr	r2, [r3]
 1038 0248 D7F8CC31 		ldr	r3, [r7, #460]
 1039 024c 9B00     		lsls	r3, r3, #2
 1040 024e 1344     		add	r3, r3, r2
 1041 0250 93ED007A 		vldr.32	s14, [r3]
 1042              		.loc 1 185 26 discriminator 3
 1043 0254 D7F8CC31 		ldr	r3, [r7, #460]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 23


 1044 0258 9B00     		lsls	r3, r3, #2
 1045 025a 03F5EC73 		add	r3, r3, #472
 1046 025e 3B44     		add	r3, r3, r7
 1047 0260 B83B     		subs	r3, r3, #184
 1048 0262 D3ED006A 		vldr.32	s13, [r3]
 1049              		.loc 1 185 30 discriminator 3
 1050 0266 D7ED537A 		vldr.32	s15, [r7, #332]
 1051 026a 66EEA77A 		vmul.f32	s15, s13, s15
 1052              		.loc 1 185 22 discriminator 3
 1053 026e 77EE277A 		vadd.f32	s15, s14, s15
 1054 0272 07F5EC73 		add	r3, r7, #472
 1055 0276 A3F5E673 		sub	r3, r3, #460
 1056 027a 1A68     		ldr	r2, [r3]
 1057 027c D7F8CC31 		ldr	r3, [r7, #460]
 1058 0280 9B00     		lsls	r3, r3, #2
 1059 0282 1344     		add	r3, r3, r2
 1060 0284 C3ED007A 		vstr.32	s15, [r3]
 184:Core/Src/kalman.c ****             kf->x[i] += K[i] * y;
 1061              		.loc 1 184 33 discriminator 3
 1062 0288 D7F8CC31 		ldr	r3, [r7, #460]
 1063 028c 0133     		adds	r3, r3, #1
 1064 028e C7F8CC31 		str	r3, [r7, #460]
 1065              	.L41:
 184:Core/Src/kalman.c ****             kf->x[i] += K[i] * y;
 1066              		.loc 1 184 27 discriminator 1
 1067 0292 D7F8CC31 		ldr	r3, [r7, #460]
 1068 0296 022B     		cmp	r3, #2
 1069 0298 D1DD     		ble	.L42
 1070              	.LBE15:
 186:Core/Src/kalman.c ****         }
 187:Core/Src/kalman.c **** 
 188:Core/Src/kalman.c ****         // Covariance update: P = (I - K*H)*P
 189:Core/Src/kalman.c ****         float KH[3][3] = {0};
 1071              		.loc 1 189 15
 1072 029a 07F5EC73 		add	r3, r7, #472
 1073 029e A3F5E273 		sub	r3, r3, #452
 1074 02a2 1846     		mov	r0, r3
 1075 02a4 2423     		movs	r3, #36
 1076 02a6 1A46     		mov	r2, r3
 1077 02a8 0021     		movs	r1, #0
 1078 02aa FFF7FEFF 		bl	memset
 190:Core/Src/kalman.c ****         float IKH[3][3];
 191:Core/Src/kalman.c ****         float Pnew[3][3] = {0};
 1079              		.loc 1 191 15
 1080 02ae 07F5EC73 		add	r3, r7, #472
 1081 02b2 A3F5BE73 		sub	r3, r3, #380
 1082 02b6 1846     		mov	r0, r3
 1083 02b8 2423     		movs	r3, #36
 1084 02ba 1A46     		mov	r2, r3
 1085 02bc 0021     		movs	r1, #0
 1086 02be FFF7FEFF 		bl	memset
 1087              	.LBB16:
 192:Core/Src/kalman.c **** 
 193:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1088              		.loc 1 193 18
 1089 02c2 0023     		movs	r3, #0
 1090 02c4 C7F8C831 		str	r3, [r7, #456]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 24


 1091              		.loc 1 193 9
 1092 02c8 62E0     		b	.L43
 1093              	.L48:
 1094              	.LBB17:
 194:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1095              		.loc 1 194 22
 1096 02ca 0023     		movs	r3, #0
 1097 02cc C7F8C431 		str	r3, [r7, #452]
 1098              		.loc 1 194 13
 1099 02d0 55E0     		b	.L44
 1100              	.L47:
 195:Core/Src/kalman.c ****                 KH[i][j] = K[i] * H[0][j];
 1101              		.loc 1 195 29
 1102 02d2 D7F8C831 		ldr	r3, [r7, #456]
 1103 02d6 9B00     		lsls	r3, r3, #2
 1104 02d8 03F5EC73 		add	r3, r3, #472
 1105 02dc 3B44     		add	r3, r3, r7
 1106 02de B83B     		subs	r3, r3, #184
 1107 02e0 93ED007A 		vldr.32	s14, [r3]
 1108              		.loc 1 195 39
 1109 02e4 D7F8C431 		ldr	r3, [r7, #452]
 1110 02e8 9B00     		lsls	r3, r3, #2
 1111 02ea 03F5EC73 		add	r3, r3, #472
 1112 02ee 3B44     		add	r3, r3, r7
 1113 02f0 A03B     		subs	r3, r3, #160
 1114 02f2 D3ED007A 		vldr.32	s15, [r3]
 1115              		.loc 1 195 33
 1116 02f6 67EE277A 		vmul.f32	s15, s14, s15
 1117              		.loc 1 195 26
 1118 02fa 07F5EC73 		add	r3, r7, #472
 1119 02fe A3F5E271 		sub	r1, r3, #452
 1120 0302 D7F8C821 		ldr	r2, [r7, #456]
 1121 0306 1346     		mov	r3, r2
 1122 0308 5B00     		lsls	r3, r3, #1
 1123 030a 1344     		add	r3, r3, r2
 1124 030c D7F8C421 		ldr	r2, [r7, #452]
 1125 0310 1344     		add	r3, r3, r2
 1126 0312 9B00     		lsls	r3, r3, #2
 1127 0314 0B44     		add	r3, r3, r1
 1128 0316 C3ED007A 		vstr.32	s15, [r3]
 196:Core/Src/kalman.c ****                 IKH[i][j] = (i == j ? 1.0f : 0.0f) - KH[i][j];
 1129              		.loc 1 196 44
 1130 031a D7F8C821 		ldr	r2, [r7, #456]
 1131 031e D7F8C431 		ldr	r3, [r7, #452]
 1132 0322 9A42     		cmp	r2, r3
 1133 0324 02D1     		bne	.L45
 1134              		.loc 1 196 44 is_stmt 0 discriminator 1
 1135 0326 B7EE007A 		vmov.f32	s14, #1.0e+0
 1136 032a 01E0     		b	.L46
 1137              	.L45:
 1138              		.loc 1 196 44 discriminator 2
 1139 032c 9FEDBB7A 		vldr.32	s14, .L109
 1140              	.L46:
 1141              		.loc 1 196 59 is_stmt 1 discriminator 4
 1142 0330 07F5EC73 		add	r3, r7, #472
 1143 0334 A3F5E271 		sub	r1, r3, #452
 1144 0338 D7F8C821 		ldr	r2, [r7, #456]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 25


 1145 033c 1346     		mov	r3, r2
 1146 033e 5B00     		lsls	r3, r3, #1
 1147 0340 1344     		add	r3, r3, r2
 1148 0342 D7F8C421 		ldr	r2, [r7, #452]
 1149 0346 1344     		add	r3, r3, r2
 1150 0348 9B00     		lsls	r3, r3, #2
 1151 034a 0B44     		add	r3, r3, r1
 1152 034c D3ED007A 		vldr.32	s15, [r3]
 1153              		.loc 1 196 52 discriminator 4
 1154 0350 77EE677A 		vsub.f32	s15, s14, s15
 1155              		.loc 1 196 27 discriminator 4
 1156 0354 07F5EC73 		add	r3, r7, #472
 1157 0358 A3F5D071 		sub	r1, r3, #416
 1158 035c D7F8C821 		ldr	r2, [r7, #456]
 1159 0360 1346     		mov	r3, r2
 1160 0362 5B00     		lsls	r3, r3, #1
 1161 0364 1344     		add	r3, r3, r2
 1162 0366 D7F8C421 		ldr	r2, [r7, #452]
 1163 036a 1344     		add	r3, r3, r2
 1164 036c 9B00     		lsls	r3, r3, #2
 1165 036e 0B44     		add	r3, r3, r1
 1166 0370 C3ED007A 		vstr.32	s15, [r3]
 194:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1167              		.loc 1 194 37 discriminator 4
 1168 0374 D7F8C431 		ldr	r3, [r7, #452]
 1169 0378 0133     		adds	r3, r3, #1
 1170 037a C7F8C431 		str	r3, [r7, #452]
 1171              	.L44:
 194:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1172              		.loc 1 194 31 discriminator 2
 1173 037e D7F8C431 		ldr	r3, [r7, #452]
 1174 0382 022B     		cmp	r3, #2
 1175 0384 A5DD     		ble	.L47
 1176              	.LBE17:
 193:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1177              		.loc 1 193 33 discriminator 2
 1178 0386 D7F8C831 		ldr	r3, [r7, #456]
 1179 038a 0133     		adds	r3, r3, #1
 1180 038c C7F8C831 		str	r3, [r7, #456]
 1181              	.L43:
 193:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1182              		.loc 1 193 27 discriminator 1
 1183 0390 D7F8C831 		ldr	r3, [r7, #456]
 1184 0394 022B     		cmp	r3, #2
 1185 0396 98DD     		ble	.L48
 1186              	.LBE16:
 1187              	.LBB18:
 197:Core/Src/kalman.c ****             }
 198:Core/Src/kalman.c ****         }
 199:Core/Src/kalman.c **** 
 200:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1188              		.loc 1 200 18
 1189 0398 0023     		movs	r3, #0
 1190 039a C7F8C031 		str	r3, [r7, #448]
 1191              		.loc 1 200 9
 1192 039e 76E0     		b	.L49
 1193              	.L54:
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 26


 1194              	.LBB19:
 201:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1195              		.loc 1 201 22
 1196 03a0 0023     		movs	r3, #0
 1197 03a2 C7F8BC31 		str	r3, [r7, #444]
 1198              		.loc 1 201 13
 1199 03a6 69E0     		b	.L50
 1200              	.L53:
 202:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 1201              		.loc 1 202 28
 1202 03a8 07F5EC73 		add	r3, r7, #472
 1203 03ac A3F5BE71 		sub	r1, r3, #380
 1204 03b0 D7F8C021 		ldr	r2, [r7, #448]
 1205 03b4 1346     		mov	r3, r2
 1206 03b6 5B00     		lsls	r3, r3, #1
 1207 03b8 1344     		add	r3, r3, r2
 1208 03ba D7F8BC21 		ldr	r2, [r7, #444]
 1209 03be 1344     		add	r3, r3, r2
 1210 03c0 9B00     		lsls	r3, r3, #2
 1211 03c2 0B44     		add	r3, r3, r1
 1212 03c4 4FF00002 		mov	r2, #0
 1213 03c8 1A60     		str	r2, [r3]	@ float
 1214              	.LBB20:
 203:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1215              		.loc 1 203 26
 1216 03ca 0023     		movs	r3, #0
 1217 03cc C7F8B831 		str	r3, [r7, #440]
 1218              		.loc 1 203 17
 1219 03d0 4BE0     		b	.L51
 1220              	.L52:
 204:Core/Src/kalman.c ****                     Pnew[i][j] += IKH[i][k] * kf->P[k][j];
 1221              		.loc 1 204 28 discriminator 3
 1222 03d2 07F5EC73 		add	r3, r7, #472
 1223 03d6 A3F5BE71 		sub	r1, r3, #380
 1224 03da D7F8C021 		ldr	r2, [r7, #448]
 1225 03de 1346     		mov	r3, r2
 1226 03e0 5B00     		lsls	r3, r3, #1
 1227 03e2 1344     		add	r3, r3, r2
 1228 03e4 D7F8BC21 		ldr	r2, [r7, #444]
 1229 03e8 1344     		add	r3, r3, r2
 1230 03ea 9B00     		lsls	r3, r3, #2
 1231 03ec 0B44     		add	r3, r3, r1
 1232 03ee 93ED007A 		vldr.32	s14, [r3]
 1233              		.loc 1 204 41 discriminator 3
 1234 03f2 07F5EC73 		add	r3, r7, #472
 1235 03f6 A3F5D071 		sub	r1, r3, #416
 1236 03fa D7F8C021 		ldr	r2, [r7, #448]
 1237 03fe 1346     		mov	r3, r2
 1238 0400 5B00     		lsls	r3, r3, #1
 1239 0402 1344     		add	r3, r3, r2
 1240 0404 D7F8B821 		ldr	r2, [r7, #440]
 1241 0408 1344     		add	r3, r3, r2
 1242 040a 9B00     		lsls	r3, r3, #2
 1243 040c 0B44     		add	r3, r3, r1
 1244 040e D3ED006A 		vldr.32	s13, [r3]
 1245              		.loc 1 204 55 discriminator 3
 1246 0412 07F5EC73 		add	r3, r7, #472
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 27


 1247 0416 A3F5E673 		sub	r3, r3, #460
 1248 041a 1968     		ldr	r1, [r3]
 1249 041c D7F8B821 		ldr	r2, [r7, #440]
 1250 0420 1346     		mov	r3, r2
 1251 0422 5B00     		lsls	r3, r3, #1
 1252 0424 1344     		add	r3, r3, r2
 1253 0426 D7F8BC21 		ldr	r2, [r7, #444]
 1254 042a 1344     		add	r3, r3, r2
 1255 042c 0233     		adds	r3, r3, #2
 1256 042e 9B00     		lsls	r3, r3, #2
 1257 0430 0B44     		add	r3, r3, r1
 1258 0432 0433     		adds	r3, r3, #4
 1259 0434 D3ED007A 		vldr.32	s15, [r3]
 1260              		.loc 1 204 45 discriminator 3
 1261 0438 66EEA77A 		vmul.f32	s15, s13, s15
 1262              		.loc 1 204 32 discriminator 3
 1263 043c 77EE277A 		vadd.f32	s15, s14, s15
 1264 0440 07F5EC73 		add	r3, r7, #472
 1265 0444 A3F5BE71 		sub	r1, r3, #380
 1266 0448 D7F8C021 		ldr	r2, [r7, #448]
 1267 044c 1346     		mov	r3, r2
 1268 044e 5B00     		lsls	r3, r3, #1
 1269 0450 1344     		add	r3, r3, r2
 1270 0452 D7F8BC21 		ldr	r2, [r7, #444]
 1271 0456 1344     		add	r3, r3, r2
 1272 0458 9B00     		lsls	r3, r3, #2
 1273 045a 0B44     		add	r3, r3, r1
 1274 045c C3ED007A 		vstr.32	s15, [r3]
 203:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1275              		.loc 1 203 41 discriminator 3
 1276 0460 D7F8B831 		ldr	r3, [r7, #440]
 1277 0464 0133     		adds	r3, r3, #1
 1278 0466 C7F8B831 		str	r3, [r7, #440]
 1279              	.L51:
 203:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1280              		.loc 1 203 35 discriminator 1
 1281 046a D7F8B831 		ldr	r3, [r7, #440]
 1282 046e 022B     		cmp	r3, #2
 1283 0470 AFDD     		ble	.L52
 1284              	.LBE20:
 201:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 1285              		.loc 1 201 37 discriminator 2
 1286 0472 D7F8BC31 		ldr	r3, [r7, #444]
 1287 0476 0133     		adds	r3, r3, #1
 1288 0478 C7F8BC31 		str	r3, [r7, #444]
 1289              	.L50:
 201:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 1290              		.loc 1 201 31 discriminator 1
 1291 047c D7F8BC31 		ldr	r3, [r7, #444]
 1292 0480 022B     		cmp	r3, #2
 1293 0482 91DD     		ble	.L53
 1294              	.LBE19:
 200:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1295              		.loc 1 200 33 discriminator 2
 1296 0484 D7F8C031 		ldr	r3, [r7, #448]
 1297 0488 0133     		adds	r3, r3, #1
 1298 048a C7F8C031 		str	r3, [r7, #448]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 28


 1299              	.L49:
 200:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1300              		.loc 1 200 27 discriminator 1
 1301 048e D7F8C031 		ldr	r3, [r7, #448]
 1302 0492 022B     		cmp	r3, #2
 1303 0494 84DD     		ble	.L54
 1304              	.LBE18:
 1305              	.LBB21:
 205:Core/Src/kalman.c ****                 }
 206:Core/Src/kalman.c ****             }
 207:Core/Src/kalman.c ****         }
 208:Core/Src/kalman.c **** 
 209:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1306              		.loc 1 209 18
 1307 0496 0023     		movs	r3, #0
 1308 0498 C7F8B431 		str	r3, [r7, #436]
 1309              		.loc 1 209 9
 1310 049c 32E0     		b	.L55
 1311              	.L58:
 1312              	.LBB22:
 210:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1313              		.loc 1 210 22
 1314 049e 0023     		movs	r3, #0
 1315 04a0 C7F8B031 		str	r3, [r7, #432]
 1316              		.loc 1 210 13
 1317 04a4 25E0     		b	.L56
 1318              	.L57:
 211:Core/Src/kalman.c ****                 kf->P[i][j] = Pnew[i][j];
 1319              		.loc 1 211 38 discriminator 3
 1320 04a6 07F5EC73 		add	r3, r7, #472
 1321 04aa A3F5BE71 		sub	r1, r3, #380
 1322 04ae D7F8B421 		ldr	r2, [r7, #436]
 1323 04b2 1346     		mov	r3, r2
 1324 04b4 5B00     		lsls	r3, r3, #1
 1325 04b6 1344     		add	r3, r3, r2
 1326 04b8 D7F8B021 		ldr	r2, [r7, #432]
 1327 04bc 1344     		add	r3, r3, r2
 1328 04be 9B00     		lsls	r3, r3, #2
 1329 04c0 0B44     		add	r3, r3, r1
 1330 04c2 1968     		ldr	r1, [r3]	@ float
 1331              		.loc 1 211 29 discriminator 3
 1332 04c4 07F5EC73 		add	r3, r7, #472
 1333 04c8 A3F5E673 		sub	r3, r3, #460
 1334 04cc 1868     		ldr	r0, [r3]
 1335 04ce D7F8B421 		ldr	r2, [r7, #436]
 1336 04d2 1346     		mov	r3, r2
 1337 04d4 5B00     		lsls	r3, r3, #1
 1338 04d6 1344     		add	r3, r3, r2
 1339 04d8 D7F8B021 		ldr	r2, [r7, #432]
 1340 04dc 1344     		add	r3, r3, r2
 1341 04de 0233     		adds	r3, r3, #2
 1342 04e0 9B00     		lsls	r3, r3, #2
 1343 04e2 0344     		add	r3, r3, r0
 1344 04e4 0433     		adds	r3, r3, #4
 1345 04e6 1960     		str	r1, [r3]	@ float
 210:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1346              		.loc 1 210 37 discriminator 3
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 29


 1347 04e8 D7F8B031 		ldr	r3, [r7, #432]
 1348 04ec 0133     		adds	r3, r3, #1
 1349 04ee C7F8B031 		str	r3, [r7, #432]
 1350              	.L56:
 210:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1351              		.loc 1 210 31 discriminator 1
 1352 04f2 D7F8B031 		ldr	r3, [r7, #432]
 1353 04f6 022B     		cmp	r3, #2
 1354 04f8 D5DD     		ble	.L57
 1355              	.LBE22:
 209:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1356              		.loc 1 209 33 discriminator 2
 1357 04fa D7F8B431 		ldr	r3, [r7, #436]
 1358 04fe 0133     		adds	r3, r3, #1
 1359 0500 C7F8B431 		str	r3, [r7, #436]
 1360              	.L55:
 209:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1361              		.loc 1 209 27 discriminator 1
 1362 0504 D7F8B431 		ldr	r3, [r7, #436]
 1363 0508 022B     		cmp	r3, #2
 1364 050a C8DD     		ble	.L58
 1365 050c 00F0C2BC 		b	.L35
 1366              	.L36:
 1367              	.LBE21:
 1368              	.LBE12:
 1369              	.LBB23:
 212:Core/Src/kalman.c ****             }
 213:Core/Src/kalman.c ****         }
 214:Core/Src/kalman.c ****     } else {
 215:Core/Src/kalman.c ****         // Use both altitude and acceleration measurements
 216:Core/Src/kalman.c ****         // H = [1 0 0; 0 0 1]
 217:Core/Src/kalman.c ****         float H[2][3] = {
 1370              		.loc 1 217 15
 1371 0510 434B     		ldr	r3, .L109+4
 1372 0512 07F58474 		add	r4, r7, #264
 1373 0516 1D46     		mov	r5, r3
 1374 0518 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 1375 051a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 1376 051c 95E80300 		ldm	r5, {r0, r1}
 1377 0520 84E80300 		stm	r4, {r0, r1}
 218:Core/Src/kalman.c ****             {1.0f, 0.0f, 0.0f},
 219:Core/Src/kalman.c ****             {0.0f, 0.0f, 1.0f}
 220:Core/Src/kalman.c ****         };
 221:Core/Src/kalman.c **** 
 222:Core/Src/kalman.c ****         float z[2] = {altitude, accel};
 1378              		.loc 1 222 15
 1379 0524 07F5EC73 		add	r3, r7, #472
 1380 0528 A3F5E873 		sub	r3, r3, #464
 1381 052c 1B68     		ldr	r3, [r3]	@ float
 1382 052e C7F80031 		str	r3, [r7, #256]	@ float
 1383 0532 07F5EC73 		add	r3, r7, #472
 1384 0536 A3F5EA73 		sub	r3, r3, #468
 1385 053a 1B68     		ldr	r3, [r3]	@ float
 1386 053c C7F80431 		str	r3, [r7, #260]	@ float
 223:Core/Src/kalman.c ****         float y[2] = {z[0] - kf->x[0], z[1] - kf->x[2]};  // Innovation
 1387              		.loc 1 223 24
 1388 0540 97ED407A 		vldr.32	s14, [r7, #256]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 30


 1389              		.loc 1 223 35
 1390 0544 07F5EC73 		add	r3, r7, #472
 1391 0548 A3F5E673 		sub	r3, r3, #460
 1392 054c 1B68     		ldr	r3, [r3]
 1393 054e D3ED007A 		vldr.32	s15, [r3]
 1394              		.loc 1 223 28
 1395 0552 77EE677A 		vsub.f32	s15, s14, s15
 1396              		.loc 1 223 15
 1397 0556 C7ED3E7A 		vstr.32	s15, [r7, #248]
 1398              		.loc 1 223 41
 1399 055a 97ED417A 		vldr.32	s14, [r7, #260]
 1400              		.loc 1 223 52
 1401 055e 07F5EC73 		add	r3, r7, #472
 1402 0562 A3F5E673 		sub	r3, r3, #460
 1403 0566 1B68     		ldr	r3, [r3]
 1404 0568 D3ED027A 		vldr.32	s15, [r3, #8]
 1405              		.loc 1 223 45
 1406 056c 77EE677A 		vsub.f32	s15, s14, s15
 1407              		.loc 1 223 15
 1408 0570 C7ED3F7A 		vstr.32	s15, [r7, #252]
 224:Core/Src/kalman.c **** 
 225:Core/Src/kalman.c ****         // S = H*P*H' + R
 226:Core/Src/kalman.c ****         float HP[2][3] = {0};
 1409              		.loc 1 226 15
 1410 0574 07F1E003 		add	r3, r7, #224
 1411 0578 0022     		movs	r2, #0
 1412 057a 1A60     		str	r2, [r3]
 1413 057c 5A60     		str	r2, [r3, #4]
 1414 057e 9A60     		str	r2, [r3, #8]
 1415 0580 DA60     		str	r2, [r3, #12]
 1416 0582 1A61     		str	r2, [r3, #16]
 1417 0584 5A61     		str	r2, [r3, #20]
 227:Core/Src/kalman.c ****         float S[2][2] = {0};
 1418              		.loc 1 227 15
 1419 0586 07F5EC73 		add	r3, r7, #472
 1420 058a A3F58473 		sub	r3, r3, #264
 1421 058e 1A46     		mov	r2, r3
 1422 0590 0023     		movs	r3, #0
 1423 0592 1360     		str	r3, [r2]
 1424 0594 5360     		str	r3, [r2, #4]
 1425 0596 9360     		str	r3, [r2, #8]
 1426 0598 D360     		str	r3, [r2, #12]
 228:Core/Src/kalman.c ****         float R[2][2] = {
 229:Core/Src/kalman.c ****             {kf->measurement_noise_alt, 0.0f},
 1427              		.loc 1 229 16
 1428 059a 07F5EC73 		add	r3, r7, #472
 1429 059e A3F5E673 		sub	r3, r3, #460
 1430 05a2 1B68     		ldr	r3, [r3]
 1431 05a4 5A6B     		ldr	r2, [r3, #52]	@ float
 228:Core/Src/kalman.c ****         float R[2][2] = {
 1432              		.loc 1 228 15
 1433 05a6 07F5EC73 		add	r3, r7, #472
 1434 05aa A3F58C73 		sub	r3, r3, #280
 1435 05ae 1A60     		str	r2, [r3]	@ float
 1436 05b0 07F5EC73 		add	r3, r7, #472
 1437 05b4 A3F58C73 		sub	r3, r3, #280
 1438 05b8 4FF00002 		mov	r2, #0
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 31


 1439 05bc 5A60     		str	r2, [r3, #4]	@ float
 1440 05be 07F5EC73 		add	r3, r7, #472
 1441 05c2 A3F58C73 		sub	r3, r3, #280
 1442 05c6 4FF00002 		mov	r2, #0
 1443 05ca 9A60     		str	r2, [r3, #8]	@ float
 230:Core/Src/kalman.c ****             {0.0f, kf->measurement_noise_acc}
 1444              		.loc 1 230 22
 1445 05cc 07F5EC73 		add	r3, r7, #472
 1446 05d0 A3F5E673 		sub	r3, r3, #460
 1447 05d4 1B68     		ldr	r3, [r3]
 1448 05d6 9A6B     		ldr	r2, [r3, #56]	@ float
 228:Core/Src/kalman.c ****         float R[2][2] = {
 1449              		.loc 1 228 15
 1450 05d8 07F5EC73 		add	r3, r7, #472
 1451 05dc A3F58C73 		sub	r3, r3, #280
 1452 05e0 DA60     		str	r2, [r3, #12]	@ float
 1453              	.LBB24:
 231:Core/Src/kalman.c ****         };
 232:Core/Src/kalman.c **** 
 233:Core/Src/kalman.c ****         for (int i = 0; i < 2; i++) {
 1454              		.loc 1 233 18
 1455 05e2 0023     		movs	r3, #0
 1456 05e4 C7F8AC31 		str	r3, [r7, #428]
 1457              		.loc 1 233 9
 1458 05e8 79E0     		b	.L60
 1459              	.L65:
 1460              	.LBB25:
 234:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1461              		.loc 1 234 22
 1462 05ea 0023     		movs	r3, #0
 1463 05ec C7F8A831 		str	r3, [r7, #424]
 1464              		.loc 1 234 13
 1465 05f0 6CE0     		b	.L61
 1466              	.L64:
 235:Core/Src/kalman.c ****                 HP[i][j] = 0.0f;
 1467              		.loc 1 235 26
 1468 05f2 D7F8AC21 		ldr	r2, [r7, #428]
 1469 05f6 1346     		mov	r3, r2
 1470 05f8 5B00     		lsls	r3, r3, #1
 1471 05fa 1344     		add	r3, r3, r2
 1472 05fc D7F8A821 		ldr	r2, [r7, #424]
 1473 0600 1344     		add	r3, r3, r2
 1474 0602 9B00     		lsls	r3, r3, #2
 1475 0604 03F5EC73 		add	r3, r3, #472
 1476 0608 3B44     		add	r3, r3, r7
 1477 060a F83B     		subs	r3, r3, #248
 1478 060c 4FF00002 		mov	r2, #0
 1479 0610 1A60     		str	r2, [r3]	@ float
 1480              	.LBB26:
 236:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1481              		.loc 1 236 26
 1482 0612 0023     		movs	r3, #0
 1483 0614 C7F8A431 		str	r3, [r7, #420]
 1484              		.loc 1 236 17
 1485 0618 4FE0     		b	.L62
 1486              	.L110:
 1487 061a 00BF     		.align	2
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 32


 1488              	.L109:
 1489 061c 00000000 		.word	0
 1490 0620 00000000 		.word	.LC0
 1491 0624 BD378635 		.word	897988541
 1492              	.L63:
 237:Core/Src/kalman.c ****                     HP[i][j] += H[i][k] * kf->P[k][j];
 1493              		.loc 1 237 26 discriminator 3
 1494 0628 D7F8AC21 		ldr	r2, [r7, #428]
 1495 062c 1346     		mov	r3, r2
 1496 062e 5B00     		lsls	r3, r3, #1
 1497 0630 1344     		add	r3, r3, r2
 1498 0632 D7F8A821 		ldr	r2, [r7, #424]
 1499 0636 1344     		add	r3, r3, r2
 1500 0638 9B00     		lsls	r3, r3, #2
 1501 063a 03F5EC73 		add	r3, r3, #472
 1502 063e 3B44     		add	r3, r3, r7
 1503 0640 F83B     		subs	r3, r3, #248
 1504 0642 93ED007A 		vldr.32	s14, [r3]
 1505              		.loc 1 237 37 discriminator 3
 1506 0646 D7F8AC21 		ldr	r2, [r7, #428]
 1507 064a 1346     		mov	r3, r2
 1508 064c 5B00     		lsls	r3, r3, #1
 1509 064e 1344     		add	r3, r3, r2
 1510 0650 D7F8A421 		ldr	r2, [r7, #420]
 1511 0654 1344     		add	r3, r3, r2
 1512 0656 9B00     		lsls	r3, r3, #2
 1513 0658 03F5EC73 		add	r3, r3, #472
 1514 065c 3B44     		add	r3, r3, r7
 1515 065e D03B     		subs	r3, r3, #208
 1516 0660 D3ED006A 		vldr.32	s13, [r3]
 1517              		.loc 1 237 51 discriminator 3
 1518 0664 07F5EC73 		add	r3, r7, #472
 1519 0668 A3F5E673 		sub	r3, r3, #460
 1520 066c 1968     		ldr	r1, [r3]
 1521 066e D7F8A421 		ldr	r2, [r7, #420]
 1522 0672 1346     		mov	r3, r2
 1523 0674 5B00     		lsls	r3, r3, #1
 1524 0676 1344     		add	r3, r3, r2
 1525 0678 D7F8A821 		ldr	r2, [r7, #424]
 1526 067c 1344     		add	r3, r3, r2
 1527 067e 0233     		adds	r3, r3, #2
 1528 0680 9B00     		lsls	r3, r3, #2
 1529 0682 0B44     		add	r3, r3, r1
 1530 0684 0433     		adds	r3, r3, #4
 1531 0686 D3ED007A 		vldr.32	s15, [r3]
 1532              		.loc 1 237 41 discriminator 3
 1533 068a 66EEA77A 		vmul.f32	s15, s13, s15
 1534              		.loc 1 237 30 discriminator 3
 1535 068e 77EE277A 		vadd.f32	s15, s14, s15
 1536 0692 D7F8AC21 		ldr	r2, [r7, #428]
 1537 0696 1346     		mov	r3, r2
 1538 0698 5B00     		lsls	r3, r3, #1
 1539 069a 1344     		add	r3, r3, r2
 1540 069c D7F8A821 		ldr	r2, [r7, #424]
 1541 06a0 1344     		add	r3, r3, r2
 1542 06a2 9B00     		lsls	r3, r3, #2
 1543 06a4 03F5EC73 		add	r3, r3, #472
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 33


 1544 06a8 3B44     		add	r3, r3, r7
 1545 06aa F83B     		subs	r3, r3, #248
 1546 06ac C3ED007A 		vstr.32	s15, [r3]
 236:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1547              		.loc 1 236 41 discriminator 3
 1548 06b0 D7F8A431 		ldr	r3, [r7, #420]
 1549 06b4 0133     		adds	r3, r3, #1
 1550 06b6 C7F8A431 		str	r3, [r7, #420]
 1551              	.L62:
 236:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1552              		.loc 1 236 35 discriminator 1
 1553 06ba D7F8A431 		ldr	r3, [r7, #420]
 1554 06be 022B     		cmp	r3, #2
 1555 06c0 B2DD     		ble	.L63
 1556              	.LBE26:
 234:Core/Src/kalman.c ****                 HP[i][j] = 0.0f;
 1557              		.loc 1 234 37 discriminator 2
 1558 06c2 D7F8A831 		ldr	r3, [r7, #424]
 1559 06c6 0133     		adds	r3, r3, #1
 1560 06c8 C7F8A831 		str	r3, [r7, #424]
 1561              	.L61:
 234:Core/Src/kalman.c ****                 HP[i][j] = 0.0f;
 1562              		.loc 1 234 31 discriminator 1
 1563 06cc D7F8A831 		ldr	r3, [r7, #424]
 1564 06d0 022B     		cmp	r3, #2
 1565 06d2 8EDD     		ble	.L64
 1566              	.LBE25:
 233:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1567              		.loc 1 233 33 discriminator 2
 1568 06d4 D7F8AC31 		ldr	r3, [r7, #428]
 1569 06d8 0133     		adds	r3, r3, #1
 1570 06da C7F8AC31 		str	r3, [r7, #428]
 1571              	.L60:
 233:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 1572              		.loc 1 233 27 discriminator 1
 1573 06de D7F8AC31 		ldr	r3, [r7, #428]
 1574 06e2 012B     		cmp	r3, #1
 1575 06e4 81DD     		ble	.L65
 1576              	.LBE24:
 1577              	.LBB27:
 238:Core/Src/kalman.c ****                 }
 239:Core/Src/kalman.c ****             }
 240:Core/Src/kalman.c ****         }
 241:Core/Src/kalman.c **** 
 242:Core/Src/kalman.c ****         for (int i = 0; i < 2; i++) {
 1578              		.loc 1 242 18
 1579 06e6 0023     		movs	r3, #0
 1580 06e8 C7F8A031 		str	r3, [r7, #416]
 1581              		.loc 1 242 9
 1582 06ec 98E0     		b	.L66
 1583              	.L71:
 1584              	.LBB28:
 243:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1585              		.loc 1 243 22
 1586 06ee 0023     		movs	r3, #0
 1587 06f0 C7F89C31 		str	r3, [r7, #412]
 1588              		.loc 1 243 13
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 34


 1589 06f4 8AE0     		b	.L67
 1590              	.L70:
 244:Core/Src/kalman.c ****                 S[i][j] = 0.0f;
 1591              		.loc 1 244 25
 1592 06f6 07F5EC73 		add	r3, r7, #472
 1593 06fa A3F58472 		sub	r2, r3, #264
 1594 06fe D7F8A031 		ldr	r3, [r7, #416]
 1595 0702 5900     		lsls	r1, r3, #1
 1596 0704 D7F89C31 		ldr	r3, [r7, #412]
 1597 0708 0B44     		add	r3, r3, r1
 1598 070a 9B00     		lsls	r3, r3, #2
 1599 070c 1344     		add	r3, r3, r2
 1600 070e 4FF00002 		mov	r2, #0
 1601 0712 1A60     		str	r2, [r3]	@ float
 1602              	.LBB29:
 245:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1603              		.loc 1 245 26
 1604 0714 0023     		movs	r3, #0
 1605 0716 C7F89831 		str	r3, [r7, #408]
 1606              		.loc 1 245 17
 1607 071a 42E0     		b	.L68
 1608              	.L69:
 246:Core/Src/kalman.c ****                     S[i][j] += HP[i][k] * H[j][k];  // H'[k][j] = H[j][k]
 1609              		.loc 1 246 25 discriminator 3
 1610 071c 07F5EC73 		add	r3, r7, #472
 1611 0720 A3F58472 		sub	r2, r3, #264
 1612 0724 D7F8A031 		ldr	r3, [r7, #416]
 1613 0728 5900     		lsls	r1, r3, #1
 1614 072a D7F89C31 		ldr	r3, [r7, #412]
 1615 072e 0B44     		add	r3, r3, r1
 1616 0730 9B00     		lsls	r3, r3, #2
 1617 0732 1344     		add	r3, r3, r2
 1618 0734 93ED007A 		vldr.32	s14, [r3]
 1619              		.loc 1 246 37 discriminator 3
 1620 0738 D7F8A021 		ldr	r2, [r7, #416]
 1621 073c 1346     		mov	r3, r2
 1622 073e 5B00     		lsls	r3, r3, #1
 1623 0740 1344     		add	r3, r3, r2
 1624 0742 D7F89821 		ldr	r2, [r7, #408]
 1625 0746 1344     		add	r3, r3, r2
 1626 0748 9B00     		lsls	r3, r3, #2
 1627 074a 03F5EC73 		add	r3, r3, #472
 1628 074e 3B44     		add	r3, r3, r7
 1629 0750 F83B     		subs	r3, r3, #248
 1630 0752 D3ED006A 		vldr.32	s13, [r3]
 1631              		.loc 1 246 47 discriminator 3
 1632 0756 D7F89C21 		ldr	r2, [r7, #412]
 1633 075a 1346     		mov	r3, r2
 1634 075c 5B00     		lsls	r3, r3, #1
 1635 075e 1344     		add	r3, r3, r2
 1636 0760 D7F89821 		ldr	r2, [r7, #408]
 1637 0764 1344     		add	r3, r3, r2
 1638 0766 9B00     		lsls	r3, r3, #2
 1639 0768 03F5EC73 		add	r3, r3, #472
 1640 076c 3B44     		add	r3, r3, r7
 1641 076e D03B     		subs	r3, r3, #208
 1642 0770 D3ED007A 		vldr.32	s15, [r3]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 35


 1643              		.loc 1 246 41 discriminator 3
 1644 0774 66EEA77A 		vmul.f32	s15, s13, s15
 1645              		.loc 1 246 29 discriminator 3
 1646 0778 77EE277A 		vadd.f32	s15, s14, s15
 1647 077c 07F5EC73 		add	r3, r7, #472
 1648 0780 A3F58472 		sub	r2, r3, #264
 1649 0784 D7F8A031 		ldr	r3, [r7, #416]
 1650 0788 5900     		lsls	r1, r3, #1
 1651 078a D7F89C31 		ldr	r3, [r7, #412]
 1652 078e 0B44     		add	r3, r3, r1
 1653 0790 9B00     		lsls	r3, r3, #2
 1654 0792 1344     		add	r3, r3, r2
 1655 0794 C3ED007A 		vstr.32	s15, [r3]
 245:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1656              		.loc 1 245 41 discriminator 3
 1657 0798 D7F89831 		ldr	r3, [r7, #408]
 1658 079c 0133     		adds	r3, r3, #1
 1659 079e C7F89831 		str	r3, [r7, #408]
 1660              	.L68:
 245:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1661              		.loc 1 245 35 discriminator 1
 1662 07a2 D7F89831 		ldr	r3, [r7, #408]
 1663 07a6 022B     		cmp	r3, #2
 1664 07a8 B8DD     		ble	.L69
 1665              	.LBE29:
 247:Core/Src/kalman.c ****                 }
 248:Core/Src/kalman.c ****                 S[i][j] += R[i][j];
 1666              		.loc 1 248 21 discriminator 2
 1667 07aa 07F5EC73 		add	r3, r7, #472
 1668 07ae A3F58472 		sub	r2, r3, #264
 1669 07b2 D7F8A031 		ldr	r3, [r7, #416]
 1670 07b6 5900     		lsls	r1, r3, #1
 1671 07b8 D7F89C31 		ldr	r3, [r7, #412]
 1672 07bc 0B44     		add	r3, r3, r1
 1673 07be 9B00     		lsls	r3, r3, #2
 1674 07c0 1344     		add	r3, r3, r2
 1675 07c2 93ED007A 		vldr.32	s14, [r3]
 1676              		.loc 1 248 32 discriminator 2
 1677 07c6 07F5EC73 		add	r3, r7, #472
 1678 07ca A3F58C72 		sub	r2, r3, #280
 1679 07ce D7F8A031 		ldr	r3, [r7, #416]
 1680 07d2 5900     		lsls	r1, r3, #1
 1681 07d4 D7F89C31 		ldr	r3, [r7, #412]
 1682 07d8 0B44     		add	r3, r3, r1
 1683 07da 9B00     		lsls	r3, r3, #2
 1684 07dc 1344     		add	r3, r3, r2
 1685 07de D3ED007A 		vldr.32	s15, [r3]
 1686              		.loc 1 248 25 discriminator 2
 1687 07e2 77EE277A 		vadd.f32	s15, s14, s15
 1688 07e6 07F5EC73 		add	r3, r7, #472
 1689 07ea A3F58472 		sub	r2, r3, #264
 1690 07ee D7F8A031 		ldr	r3, [r7, #416]
 1691 07f2 5900     		lsls	r1, r3, #1
 1692 07f4 D7F89C31 		ldr	r3, [r7, #412]
 1693 07f8 0B44     		add	r3, r3, r1
 1694 07fa 9B00     		lsls	r3, r3, #2
 1695 07fc 1344     		add	r3, r3, r2
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 36


 1696 07fe C3ED007A 		vstr.32	s15, [r3]
 243:Core/Src/kalman.c ****                 S[i][j] = 0.0f;
 1697              		.loc 1 243 37 discriminator 2
 1698 0802 D7F89C31 		ldr	r3, [r7, #412]
 1699 0806 0133     		adds	r3, r3, #1
 1700 0808 C7F89C31 		str	r3, [r7, #412]
 1701              	.L67:
 243:Core/Src/kalman.c ****                 S[i][j] = 0.0f;
 1702              		.loc 1 243 31 discriminator 1
 1703 080c D7F89C31 		ldr	r3, [r7, #412]
 1704 0810 012B     		cmp	r3, #1
 1705 0812 7FF770AF 		ble	.L70
 1706              	.LBE28:
 242:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1707              		.loc 1 242 33 discriminator 2
 1708 0816 D7F8A031 		ldr	r3, [r7, #416]
 1709 081a 0133     		adds	r3, r3, #1
 1710 081c C7F8A031 		str	r3, [r7, #416]
 1711              	.L66:
 242:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1712              		.loc 1 242 27 discriminator 1
 1713 0820 D7F8A031 		ldr	r3, [r7, #416]
 1714 0824 012B     		cmp	r3, #1
 1715 0826 7FF762AF 		ble	.L71
 1716              	.LBE27:
 249:Core/Src/kalman.c ****             }
 250:Core/Src/kalman.c ****         }
 251:Core/Src/kalman.c **** 
 252:Core/Src/kalman.c ****         // Calculate S^-1 (inverse of 2x2 matrix)
 253:Core/Src/kalman.c ****         float det = S[0][0] * S[1][1] - S[0][1] * S[1][0];
 1717              		.loc 1 253 25
 1718 082a 07F5EC73 		add	r3, r7, #472
 1719 082e A3F58473 		sub	r3, r3, #264
 1720 0832 93ED007A 		vldr.32	s14, [r3]
 1721              		.loc 1 253 35
 1722 0836 07F5EC73 		add	r3, r7, #472
 1723 083a A3F58473 		sub	r3, r3, #264
 1724 083e D3ED037A 		vldr.32	s15, [r3, #12]
 1725              		.loc 1 253 29
 1726 0842 27EE277A 		vmul.f32	s14, s14, s15
 1727              		.loc 1 253 45
 1728 0846 07F5EC73 		add	r3, r7, #472
 1729 084a A3F58473 		sub	r3, r3, #264
 1730 084e D3ED016A 		vldr.32	s13, [r3, #4]
 1731              		.loc 1 253 55
 1732 0852 07F5EC73 		add	r3, r7, #472
 1733 0856 A3F58473 		sub	r3, r3, #264
 1734 085a D3ED027A 		vldr.32	s15, [r3, #8]
 1735              		.loc 1 253 49
 1736 085e 66EEA77A 		vmul.f32	s15, s13, s15
 1737              		.loc 1 253 15
 1738 0862 77EE677A 		vsub.f32	s15, s14, s15
 1739 0866 C7ED557A 		vstr.32	s15, [r7, #340]
 254:Core/Src/kalman.c ****         if (fabsf(det) < 1e-6f) {
 1740              		.loc 1 254 13
 1741 086a D7ED557A 		vldr.32	s15, [r7, #340]
 1742 086e F0EEE77A 		vabs.f32	s15, s15
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 37


 1743              		.loc 1 254 12
 1744 0872 1FED947A 		vldr.32	s14, .L109+8
 1745 0876 F4EEC77A 		vcmpe.f32	s15, s14
 1746 087a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 1747 087e 00F10883 		bmi	.L108
 255:Core/Src/kalman.c ****             // Matrix is singular, skip update
 256:Core/Src/kalman.c ****             return;
 257:Core/Src/kalman.c ****         }
 258:Core/Src/kalman.c **** 
 259:Core/Src/kalman.c ****         float S_inv[2][2] = {
 260:Core/Src/kalman.c ****             {S[1][1] / det, -S[0][1] / det},
 1748              		.loc 1 260 18
 1749 0882 07F5EC73 		add	r3, r7, #472
 1750 0886 A3F58473 		sub	r3, r3, #264
 1751 088a D3ED036A 		vldr.32	s13, [r3, #12]
 1752              		.loc 1 260 22
 1753 088e 97ED557A 		vldr.32	s14, [r7, #340]
 1754 0892 C6EE877A 		vdiv.f32	s15, s13, s14
 259:Core/Src/kalman.c ****             {S[1][1] / det, -S[0][1] / det},
 1755              		.loc 1 259 15
 1756 0896 07F5EC73 		add	r3, r7, #472
 1757 089a A3F59473 		sub	r3, r3, #296
 1758 089e C3ED007A 		vstr.32	s15, [r3]
 1759              		.loc 1 260 34
 1760 08a2 07F5EC73 		add	r3, r7, #472
 1761 08a6 A3F58473 		sub	r3, r3, #264
 1762 08aa D3ED017A 		vldr.32	s15, [r3, #4]
 1763              		.loc 1 260 29
 1764 08ae F1EE676A 		vneg.f32	s13, s15
 1765              		.loc 1 260 38
 1766 08b2 97ED557A 		vldr.32	s14, [r7, #340]
 1767 08b6 C6EE877A 		vdiv.f32	s15, s13, s14
 259:Core/Src/kalman.c ****             {S[1][1] / det, -S[0][1] / det},
 1768              		.loc 1 259 15
 1769 08ba 07F5EC73 		add	r3, r7, #472
 1770 08be A3F59473 		sub	r3, r3, #296
 1771 08c2 C3ED017A 		vstr.32	s15, [r3, #4]
 261:Core/Src/kalman.c ****             {-S[1][0] / det, S[0][0] / det}
 1772              		.loc 1 261 19
 1773 08c6 07F5EC73 		add	r3, r7, #472
 1774 08ca A3F58473 		sub	r3, r3, #264
 1775 08ce D3ED027A 		vldr.32	s15, [r3, #8]
 1776              		.loc 1 261 14
 1777 08d2 F1EE676A 		vneg.f32	s13, s15
 1778              		.loc 1 261 23
 1779 08d6 97ED557A 		vldr.32	s14, [r7, #340]
 1780 08da C6EE877A 		vdiv.f32	s15, s13, s14
 259:Core/Src/kalman.c ****             {S[1][1] / det, -S[0][1] / det},
 1781              		.loc 1 259 15
 1782 08de 07F5EC73 		add	r3, r7, #472
 1783 08e2 A3F59473 		sub	r3, r3, #296
 1784 08e6 C3ED027A 		vstr.32	s15, [r3, #8]
 1785              		.loc 1 261 34
 1786 08ea 07F5EC73 		add	r3, r7, #472
 1787 08ee A3F58473 		sub	r3, r3, #264
 1788 08f2 D3ED006A 		vldr.32	s13, [r3]
 1789              		.loc 1 261 38
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 38


 1790 08f6 97ED557A 		vldr.32	s14, [r7, #340]
 1791 08fa C6EE877A 		vdiv.f32	s15, s13, s14
 259:Core/Src/kalman.c ****             {S[1][1] / det, -S[0][1] / det},
 1792              		.loc 1 259 15
 1793 08fe 07F5EC73 		add	r3, r7, #472
 1794 0902 A3F59473 		sub	r3, r3, #296
 1795 0906 C3ED037A 		vstr.32	s15, [r3, #12]
 262:Core/Src/kalman.c ****         };
 263:Core/Src/kalman.c **** 
 264:Core/Src/kalman.c ****         // K = P*H'*S^-1
 265:Core/Src/kalman.c ****         float PHt[3][2] = {0};
 1796              		.loc 1 265 15
 1797 090a 07F5EC73 		add	r3, r7, #472
 1798 090e A3F5A073 		sub	r3, r3, #320
 1799 0912 1A46     		mov	r2, r3
 1800 0914 0023     		movs	r3, #0
 1801 0916 1360     		str	r3, [r2]
 1802 0918 5360     		str	r3, [r2, #4]
 1803 091a 9360     		str	r3, [r2, #8]
 1804 091c D360     		str	r3, [r2, #12]
 1805 091e 1361     		str	r3, [r2, #16]
 1806 0920 5361     		str	r3, [r2, #20]
 266:Core/Src/kalman.c ****         float K[3][2] = {0};
 1807              		.loc 1 266 15
 1808 0922 07F5EC73 		add	r3, r7, #472
 1809 0926 A3F5AC73 		sub	r3, r3, #344
 1810 092a 1A46     		mov	r2, r3
 1811 092c 0023     		movs	r3, #0
 1812 092e 1360     		str	r3, [r2]
 1813 0930 5360     		str	r3, [r2, #4]
 1814 0932 9360     		str	r3, [r2, #8]
 1815 0934 D360     		str	r3, [r2, #12]
 1816 0936 1361     		str	r3, [r2, #16]
 1817 0938 5361     		str	r3, [r2, #20]
 1818              	.LBB30:
 267:Core/Src/kalman.c **** 
 268:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1819              		.loc 1 268 18
 1820 093a 0023     		movs	r3, #0
 1821 093c C7F89431 		str	r3, [r7, #404]
 1822              		.loc 1 268 9
 1823 0940 6FE0     		b	.L74
 1824              	.L79:
 1825              	.LBB31:
 269:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1826              		.loc 1 269 22
 1827 0942 0023     		movs	r3, #0
 1828 0944 C7F89031 		str	r3, [r7, #400]
 1829              		.loc 1 269 13
 1830 0948 62E0     		b	.L75
 1831              	.L78:
 270:Core/Src/kalman.c ****                 PHt[i][j] = 0.0f;
 1832              		.loc 1 270 27
 1833 094a 07F5EC73 		add	r3, r7, #472
 1834 094e A3F5A072 		sub	r2, r3, #320
 1835 0952 D7F89431 		ldr	r3, [r7, #404]
 1836 0956 5900     		lsls	r1, r3, #1
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 39


 1837 0958 D7F89031 		ldr	r3, [r7, #400]
 1838 095c 0B44     		add	r3, r3, r1
 1839 095e 9B00     		lsls	r3, r3, #2
 1840 0960 1344     		add	r3, r3, r2
 1841 0962 4FF00002 		mov	r2, #0
 1842 0966 1A60     		str	r2, [r3]	@ float
 1843              	.LBB32:
 271:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1844              		.loc 1 271 26
 1845 0968 0023     		movs	r3, #0
 1846 096a C7F88C31 		str	r3, [r7, #396]
 1847              		.loc 1 271 17
 1848 096e 46E0     		b	.L76
 1849              	.L77:
 272:Core/Src/kalman.c ****                     PHt[i][j] += kf->P[i][k] * H[j][k];  // H'[k][j] = H[j][k]
 1850              		.loc 1 272 27 discriminator 3
 1851 0970 07F5EC73 		add	r3, r7, #472
 1852 0974 A3F5A072 		sub	r2, r3, #320
 1853 0978 D7F89431 		ldr	r3, [r7, #404]
 1854 097c 5900     		lsls	r1, r3, #1
 1855 097e D7F89031 		ldr	r3, [r7, #400]
 1856 0982 0B44     		add	r3, r3, r1
 1857 0984 9B00     		lsls	r3, r3, #2
 1858 0986 1344     		add	r3, r3, r2
 1859 0988 93ED007A 		vldr.32	s14, [r3]
 1860              		.loc 1 272 42 discriminator 3
 1861 098c 07F5EC73 		add	r3, r7, #472
 1862 0990 A3F5E673 		sub	r3, r3, #460
 1863 0994 1968     		ldr	r1, [r3]
 1864 0996 D7F89421 		ldr	r2, [r7, #404]
 1865 099a 1346     		mov	r3, r2
 1866 099c 5B00     		lsls	r3, r3, #1
 1867 099e 1344     		add	r3, r3, r2
 1868 09a0 D7F88C21 		ldr	r2, [r7, #396]
 1869 09a4 1344     		add	r3, r3, r2
 1870 09a6 0233     		adds	r3, r3, #2
 1871 09a8 9B00     		lsls	r3, r3, #2
 1872 09aa 0B44     		add	r3, r3, r1
 1873 09ac 0433     		adds	r3, r3, #4
 1874 09ae D3ED006A 		vldr.32	s13, [r3]
 1875              		.loc 1 272 52 discriminator 3
 1876 09b2 D7F89021 		ldr	r2, [r7, #400]
 1877 09b6 1346     		mov	r3, r2
 1878 09b8 5B00     		lsls	r3, r3, #1
 1879 09ba 1344     		add	r3, r3, r2
 1880 09bc D7F88C21 		ldr	r2, [r7, #396]
 1881 09c0 1344     		add	r3, r3, r2
 1882 09c2 9B00     		lsls	r3, r3, #2
 1883 09c4 03F5EC73 		add	r3, r3, #472
 1884 09c8 3B44     		add	r3, r3, r7
 1885 09ca D03B     		subs	r3, r3, #208
 1886 09cc D3ED007A 		vldr.32	s15, [r3]
 1887              		.loc 1 272 46 discriminator 3
 1888 09d0 66EEA77A 		vmul.f32	s15, s13, s15
 1889              		.loc 1 272 31 discriminator 3
 1890 09d4 77EE277A 		vadd.f32	s15, s14, s15
 1891 09d8 07F5EC73 		add	r3, r7, #472
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 40


 1892 09dc A3F5A072 		sub	r2, r3, #320
 1893 09e0 D7F89431 		ldr	r3, [r7, #404]
 1894 09e4 5900     		lsls	r1, r3, #1
 1895 09e6 D7F89031 		ldr	r3, [r7, #400]
 1896 09ea 0B44     		add	r3, r3, r1
 1897 09ec 9B00     		lsls	r3, r3, #2
 1898 09ee 1344     		add	r3, r3, r2
 1899 09f0 C3ED007A 		vstr.32	s15, [r3]
 271:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1900              		.loc 1 271 41 discriminator 3
 1901 09f4 D7F88C31 		ldr	r3, [r7, #396]
 1902 09f8 0133     		adds	r3, r3, #1
 1903 09fa C7F88C31 		str	r3, [r7, #396]
 1904              	.L76:
 271:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 1905              		.loc 1 271 35 discriminator 1
 1906 09fe D7F88C31 		ldr	r3, [r7, #396]
 1907 0a02 022B     		cmp	r3, #2
 1908 0a04 B4DD     		ble	.L77
 1909              	.LBE32:
 269:Core/Src/kalman.c ****                 PHt[i][j] = 0.0f;
 1910              		.loc 1 269 37 discriminator 2
 1911 0a06 D7F89031 		ldr	r3, [r7, #400]
 1912 0a0a 0133     		adds	r3, r3, #1
 1913 0a0c C7F89031 		str	r3, [r7, #400]
 1914              	.L75:
 269:Core/Src/kalman.c ****                 PHt[i][j] = 0.0f;
 1915              		.loc 1 269 31 discriminator 1
 1916 0a10 D7F89031 		ldr	r3, [r7, #400]
 1917 0a14 012B     		cmp	r3, #1
 1918 0a16 98DD     		ble	.L78
 1919              	.LBE31:
 268:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1920              		.loc 1 268 33 discriminator 2
 1921 0a18 D7F89431 		ldr	r3, [r7, #404]
 1922 0a1c 0133     		adds	r3, r3, #1
 1923 0a1e C7F89431 		str	r3, [r7, #404]
 1924              	.L74:
 268:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1925              		.loc 1 268 27 discriminator 1
 1926 0a22 D7F89431 		ldr	r3, [r7, #404]
 1927 0a26 022B     		cmp	r3, #2
 1928 0a28 8BDD     		ble	.L79
 1929              	.LBE30:
 1930              	.LBB33:
 273:Core/Src/kalman.c ****                 }
 274:Core/Src/kalman.c ****             }
 275:Core/Src/kalman.c ****         }
 276:Core/Src/kalman.c **** 
 277:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 1931              		.loc 1 277 18
 1932 0a2a 0023     		movs	r3, #0
 1933 0a2c C7F88831 		str	r3, [r7, #392]
 1934              		.loc 1 277 9
 1935 0a30 69E0     		b	.L80
 1936              	.L85:
 1937              	.LBB34:
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 41


 278:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 1938              		.loc 1 278 22
 1939 0a32 0023     		movs	r3, #0
 1940 0a34 C7F88431 		str	r3, [r7, #388]
 1941              		.loc 1 278 13
 1942 0a38 5CE0     		b	.L81
 1943              	.L84:
 279:Core/Src/kalman.c ****                 K[i][j] = 0.0f;
 1944              		.loc 1 279 25
 1945 0a3a 07F5EC73 		add	r3, r7, #472
 1946 0a3e A3F5AC72 		sub	r2, r3, #344
 1947 0a42 D7F88831 		ldr	r3, [r7, #392]
 1948 0a46 5900     		lsls	r1, r3, #1
 1949 0a48 D7F88431 		ldr	r3, [r7, #388]
 1950 0a4c 0B44     		add	r3, r3, r1
 1951 0a4e 9B00     		lsls	r3, r3, #2
 1952 0a50 1344     		add	r3, r3, r2
 1953 0a52 4FF00002 		mov	r2, #0
 1954 0a56 1A60     		str	r2, [r3]	@ float
 1955              	.LBB35:
 280:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 1956              		.loc 1 280 26
 1957 0a58 0023     		movs	r3, #0
 1958 0a5a C7F88031 		str	r3, [r7, #384]
 1959              		.loc 1 280 17
 1960 0a5e 40E0     		b	.L82
 1961              	.L83:
 281:Core/Src/kalman.c ****                     K[i][j] += PHt[i][k] * S_inv[k][j];
 1962              		.loc 1 281 25 discriminator 3
 1963 0a60 07F5EC73 		add	r3, r7, #472
 1964 0a64 A3F5AC72 		sub	r2, r3, #344
 1965 0a68 D7F88831 		ldr	r3, [r7, #392]
 1966 0a6c 5900     		lsls	r1, r3, #1
 1967 0a6e D7F88431 		ldr	r3, [r7, #388]
 1968 0a72 0B44     		add	r3, r3, r1
 1969 0a74 9B00     		lsls	r3, r3, #2
 1970 0a76 1344     		add	r3, r3, r2
 1971 0a78 93ED007A 		vldr.32	s14, [r3]
 1972              		.loc 1 281 38 discriminator 3
 1973 0a7c 07F5EC73 		add	r3, r7, #472
 1974 0a80 A3F5A072 		sub	r2, r3, #320
 1975 0a84 D7F88831 		ldr	r3, [r7, #392]
 1976 0a88 5900     		lsls	r1, r3, #1
 1977 0a8a D7F88031 		ldr	r3, [r7, #384]
 1978 0a8e 0B44     		add	r3, r3, r1
 1979 0a90 9B00     		lsls	r3, r3, #2
 1980 0a92 1344     		add	r3, r3, r2
 1981 0a94 D3ED006A 		vldr.32	s13, [r3]
 1982              		.loc 1 281 52 discriminator 3
 1983 0a98 07F5EC73 		add	r3, r7, #472
 1984 0a9c A3F59472 		sub	r2, r3, #296
 1985 0aa0 D7F88031 		ldr	r3, [r7, #384]
 1986 0aa4 5900     		lsls	r1, r3, #1
 1987 0aa6 D7F88431 		ldr	r3, [r7, #388]
 1988 0aaa 0B44     		add	r3, r3, r1
 1989 0aac 9B00     		lsls	r3, r3, #2
 1990 0aae 1344     		add	r3, r3, r2
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 42


 1991 0ab0 D3ED007A 		vldr.32	s15, [r3]
 1992              		.loc 1 281 42 discriminator 3
 1993 0ab4 66EEA77A 		vmul.f32	s15, s13, s15
 1994              		.loc 1 281 29 discriminator 3
 1995 0ab8 77EE277A 		vadd.f32	s15, s14, s15
 1996 0abc 07F5EC73 		add	r3, r7, #472
 1997 0ac0 A3F5AC72 		sub	r2, r3, #344
 1998 0ac4 D7F88831 		ldr	r3, [r7, #392]
 1999 0ac8 5900     		lsls	r1, r3, #1
 2000 0aca D7F88431 		ldr	r3, [r7, #388]
 2001 0ace 0B44     		add	r3, r3, r1
 2002 0ad0 9B00     		lsls	r3, r3, #2
 2003 0ad2 1344     		add	r3, r3, r2
 2004 0ad4 C3ED007A 		vstr.32	s15, [r3]
 280:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 2005              		.loc 1 280 41 discriminator 3
 2006 0ad8 D7F88031 		ldr	r3, [r7, #384]
 2007 0adc 0133     		adds	r3, r3, #1
 2008 0ade C7F88031 		str	r3, [r7, #384]
 2009              	.L82:
 280:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 2010              		.loc 1 280 35 discriminator 1
 2011 0ae2 D7F88031 		ldr	r3, [r7, #384]
 2012 0ae6 012B     		cmp	r3, #1
 2013 0ae8 BADD     		ble	.L83
 2014              	.LBE35:
 278:Core/Src/kalman.c ****                 K[i][j] = 0.0f;
 2015              		.loc 1 278 37 discriminator 2
 2016 0aea D7F88431 		ldr	r3, [r7, #388]
 2017 0aee 0133     		adds	r3, r3, #1
 2018 0af0 C7F88431 		str	r3, [r7, #388]
 2019              	.L81:
 278:Core/Src/kalman.c ****                 K[i][j] = 0.0f;
 2020              		.loc 1 278 31 discriminator 1
 2021 0af4 D7F88431 		ldr	r3, [r7, #388]
 2022 0af8 012B     		cmp	r3, #1
 2023 0afa 9EDD     		ble	.L84
 2024              	.LBE34:
 277:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2025              		.loc 1 277 33 discriminator 2
 2026 0afc D7F88831 		ldr	r3, [r7, #392]
 2027 0b00 0133     		adds	r3, r3, #1
 2028 0b02 C7F88831 		str	r3, [r7, #392]
 2029              	.L80:
 277:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2030              		.loc 1 277 27 discriminator 1
 2031 0b06 D7F88831 		ldr	r3, [r7, #392]
 2032 0b0a 022B     		cmp	r3, #2
 2033 0b0c 91DD     		ble	.L85
 2034              	.LBE33:
 2035              	.LBB36:
 282:Core/Src/kalman.c ****                 }
 283:Core/Src/kalman.c ****             }
 284:Core/Src/kalman.c ****         }
 285:Core/Src/kalman.c **** 
 286:Core/Src/kalman.c ****         // State update: x = x + K*y
 287:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 43


 2036              		.loc 1 287 18
 2037 0b0e 0023     		movs	r3, #0
 2038 0b10 C7F87C31 		str	r3, [r7, #380]
 2039              		.loc 1 287 9
 2040 0b14 42E0     		b	.L86
 2041              	.L89:
 2042              	.LBB37:
 288:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2043              		.loc 1 288 22
 2044 0b16 0023     		movs	r3, #0
 2045 0b18 C7F87831 		str	r3, [r7, #376]
 2046              		.loc 1 288 13
 2047 0b1c 35E0     		b	.L87
 2048              	.L88:
 289:Core/Src/kalman.c ****                 kf->x[i] += K[i][j] * y[j];
 2049              		.loc 1 289 22 discriminator 3
 2050 0b1e 07F5EC73 		add	r3, r7, #472
 2051 0b22 A3F5E673 		sub	r3, r3, #460
 2052 0b26 1A68     		ldr	r2, [r3]
 2053 0b28 D7F87C31 		ldr	r3, [r7, #380]
 2054 0b2c 9B00     		lsls	r3, r3, #2
 2055 0b2e 1344     		add	r3, r3, r2
 2056 0b30 93ED007A 		vldr.32	s14, [r3]
 2057              		.loc 1 289 33 discriminator 3
 2058 0b34 07F5EC73 		add	r3, r7, #472
 2059 0b38 A3F5AC72 		sub	r2, r3, #344
 2060 0b3c D7F87C31 		ldr	r3, [r7, #380]
 2061 0b40 5900     		lsls	r1, r3, #1
 2062 0b42 D7F87831 		ldr	r3, [r7, #376]
 2063 0b46 0B44     		add	r3, r3, r1
 2064 0b48 9B00     		lsls	r3, r3, #2
 2065 0b4a 1344     		add	r3, r3, r2
 2066 0b4c D3ED006A 		vldr.32	s13, [r3]
 2067              		.loc 1 289 40 discriminator 3
 2068 0b50 D7F87831 		ldr	r3, [r7, #376]
 2069 0b54 9B00     		lsls	r3, r3, #2
 2070 0b56 03F5EC73 		add	r3, r3, #472
 2071 0b5a 3B44     		add	r3, r3, r7
 2072 0b5c E03B     		subs	r3, r3, #224
 2073 0b5e D3ED007A 		vldr.32	s15, [r3]
 2074              		.loc 1 289 37 discriminator 3
 2075 0b62 66EEA77A 		vmul.f32	s15, s13, s15
 2076              		.loc 1 289 26 discriminator 3
 2077 0b66 77EE277A 		vadd.f32	s15, s14, s15
 2078 0b6a 07F5EC73 		add	r3, r7, #472
 2079 0b6e A3F5E673 		sub	r3, r3, #460
 2080 0b72 1A68     		ldr	r2, [r3]
 2081 0b74 D7F87C31 		ldr	r3, [r7, #380]
 2082 0b78 9B00     		lsls	r3, r3, #2
 2083 0b7a 1344     		add	r3, r3, r2
 2084 0b7c C3ED007A 		vstr.32	s15, [r3]
 288:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2085              		.loc 1 288 37 discriminator 3
 2086 0b80 D7F87831 		ldr	r3, [r7, #376]
 2087 0b84 0133     		adds	r3, r3, #1
 2088 0b86 C7F87831 		str	r3, [r7, #376]
 2089              	.L87:
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 44


 288:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2090              		.loc 1 288 31 discriminator 1
 2091 0b8a D7F87831 		ldr	r3, [r7, #376]
 2092 0b8e 012B     		cmp	r3, #1
 2093 0b90 C5DD     		ble	.L88
 2094              	.LBE37:
 287:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2095              		.loc 1 287 33 discriminator 2
 2096 0b92 D7F87C31 		ldr	r3, [r7, #380]
 2097 0b96 0133     		adds	r3, r3, #1
 2098 0b98 C7F87C31 		str	r3, [r7, #380]
 2099              	.L86:
 287:Core/Src/kalman.c ****             for (int j = 0; j < 2; j++) {
 2100              		.loc 1 287 27 discriminator 1
 2101 0b9c D7F87C31 		ldr	r3, [r7, #380]
 2102 0ba0 022B     		cmp	r3, #2
 2103 0ba2 B8DD     		ble	.L89
 2104              	.LBE36:
 290:Core/Src/kalman.c ****             }
 291:Core/Src/kalman.c ****         }
 292:Core/Src/kalman.c **** 
 293:Core/Src/kalman.c ****         // Covariance update: P = (I - K*H)*P
 294:Core/Src/kalman.c ****         float KH[3][3] = {0};
 2105              		.loc 1 294 15
 2106 0ba4 07F5EC73 		add	r3, r7, #472
 2107 0ba8 A3F5E273 		sub	r3, r3, #452
 2108 0bac 1846     		mov	r0, r3
 2109 0bae 2423     		movs	r3, #36
 2110 0bb0 1A46     		mov	r2, r3
 2111 0bb2 0021     		movs	r1, #0
 2112 0bb4 FFF7FEFF 		bl	memset
 295:Core/Src/kalman.c ****         float IKH[3][3];
 296:Core/Src/kalman.c ****         float Pnew[3][3] = {0};
 2113              		.loc 1 296 15
 2114 0bb8 07F5EC73 		add	r3, r7, #472
 2115 0bbc A3F5BE73 		sub	r3, r3, #380
 2116 0bc0 1846     		mov	r0, r3
 2117 0bc2 2423     		movs	r3, #36
 2118 0bc4 1A46     		mov	r2, r3
 2119 0bc6 0021     		movs	r1, #0
 2120 0bc8 FFF7FEFF 		bl	memset
 2121              	.LBB38:
 297:Core/Src/kalman.c **** 
 298:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 2122              		.loc 1 298 18
 2123 0bcc 0023     		movs	r3, #0
 2124 0bce C7F87431 		str	r3, [r7, #372]
 2125              		.loc 1 298 9
 2126 0bd2 9EE0     		b	.L90
 2127              	.L97:
 2128              	.LBB39:
 299:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2129              		.loc 1 299 22
 2130 0bd4 0023     		movs	r3, #0
 2131 0bd6 C7F87031 		str	r3, [r7, #368]
 2132              		.loc 1 299 13
 2133 0bda 90E0     		b	.L91
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 45


 2134              	.L96:
 300:Core/Src/kalman.c ****                 KH[i][j] = 0.0f;
 2135              		.loc 1 300 26
 2136 0bdc 07F5EC73 		add	r3, r7, #472
 2137 0be0 A3F5E271 		sub	r1, r3, #452
 2138 0be4 D7F87421 		ldr	r2, [r7, #372]
 2139 0be8 1346     		mov	r3, r2
 2140 0bea 5B00     		lsls	r3, r3, #1
 2141 0bec 1344     		add	r3, r3, r2
 2142 0bee D7F87021 		ldr	r2, [r7, #368]
 2143 0bf2 1344     		add	r3, r3, r2
 2144 0bf4 9B00     		lsls	r3, r3, #2
 2145 0bf6 0B44     		add	r3, r3, r1
 2146 0bf8 4FF00002 		mov	r2, #0
 2147 0bfc 1A60     		str	r2, [r3]	@ float
 2148              	.LBB40:
 301:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 2149              		.loc 1 301 26
 2150 0bfe 0023     		movs	r3, #0
 2151 0c00 C7F86C31 		str	r3, [r7, #364]
 2152              		.loc 1 301 17
 2153 0c04 45E0     		b	.L92
 2154              	.L93:
 302:Core/Src/kalman.c ****                     KH[i][j] += K[i][k] * H[k][j];
 2155              		.loc 1 302 26 discriminator 3
 2156 0c06 07F5EC73 		add	r3, r7, #472
 2157 0c0a A3F5E271 		sub	r1, r3, #452
 2158 0c0e D7F87421 		ldr	r2, [r7, #372]
 2159 0c12 1346     		mov	r3, r2
 2160 0c14 5B00     		lsls	r3, r3, #1
 2161 0c16 1344     		add	r3, r3, r2
 2162 0c18 D7F87021 		ldr	r2, [r7, #368]
 2163 0c1c 1344     		add	r3, r3, r2
 2164 0c1e 9B00     		lsls	r3, r3, #2
 2165 0c20 0B44     		add	r3, r3, r1
 2166 0c22 93ED007A 		vldr.32	s14, [r3]
 2167              		.loc 1 302 37 discriminator 3
 2168 0c26 07F5EC73 		add	r3, r7, #472
 2169 0c2a A3F5AC72 		sub	r2, r3, #344
 2170 0c2e D7F87431 		ldr	r3, [r7, #372]
 2171 0c32 5900     		lsls	r1, r3, #1
 2172 0c34 D7F86C31 		ldr	r3, [r7, #364]
 2173 0c38 0B44     		add	r3, r3, r1
 2174 0c3a 9B00     		lsls	r3, r3, #2
 2175 0c3c 1344     		add	r3, r3, r2
 2176 0c3e D3ED006A 		vldr.32	s13, [r3]
 2177              		.loc 1 302 47 discriminator 3
 2178 0c42 D7F86C21 		ldr	r2, [r7, #364]
 2179 0c46 1346     		mov	r3, r2
 2180 0c48 5B00     		lsls	r3, r3, #1
 2181 0c4a 1344     		add	r3, r3, r2
 2182 0c4c D7F87021 		ldr	r2, [r7, #368]
 2183 0c50 1344     		add	r3, r3, r2
 2184 0c52 9B00     		lsls	r3, r3, #2
 2185 0c54 03F5EC73 		add	r3, r3, #472
 2186 0c58 3B44     		add	r3, r3, r7
 2187 0c5a D03B     		subs	r3, r3, #208
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 46


 2188 0c5c D3ED007A 		vldr.32	s15, [r3]
 2189              		.loc 1 302 41 discriminator 3
 2190 0c60 66EEA77A 		vmul.f32	s15, s13, s15
 2191              		.loc 1 302 30 discriminator 3
 2192 0c64 77EE277A 		vadd.f32	s15, s14, s15
 2193 0c68 07F5EC73 		add	r3, r7, #472
 2194 0c6c A3F5E271 		sub	r1, r3, #452
 2195 0c70 D7F87421 		ldr	r2, [r7, #372]
 2196 0c74 1346     		mov	r3, r2
 2197 0c76 5B00     		lsls	r3, r3, #1
 2198 0c78 1344     		add	r3, r3, r2
 2199 0c7a D7F87021 		ldr	r2, [r7, #368]
 2200 0c7e 1344     		add	r3, r3, r2
 2201 0c80 9B00     		lsls	r3, r3, #2
 2202 0c82 0B44     		add	r3, r3, r1
 2203 0c84 C3ED007A 		vstr.32	s15, [r3]
 301:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 2204              		.loc 1 301 41 discriminator 3
 2205 0c88 D7F86C31 		ldr	r3, [r7, #364]
 2206 0c8c 0133     		adds	r3, r3, #1
 2207 0c8e C7F86C31 		str	r3, [r7, #364]
 2208              	.L92:
 301:Core/Src/kalman.c ****                 for (int k = 0; k < 2; k++) {
 2209              		.loc 1 301 35 discriminator 1
 2210 0c92 D7F86C31 		ldr	r3, [r7, #364]
 2211 0c96 012B     		cmp	r3, #1
 2212 0c98 B5DD     		ble	.L93
 2213              	.LBE40:
 303:Core/Src/kalman.c ****                 }
 304:Core/Src/kalman.c ****                 IKH[i][j] = (i == j ? 1.0f : 0.0f) - KH[i][j];
 2214              		.loc 1 304 44
 2215 0c9a D7F87421 		ldr	r2, [r7, #372]
 2216 0c9e D7F87031 		ldr	r3, [r7, #368]
 2217 0ca2 9A42     		cmp	r2, r3
 2218 0ca4 02D1     		bne	.L94
 2219              		.loc 1 304 44 is_stmt 0 discriminator 1
 2220 0ca6 B7EE007A 		vmov.f32	s14, #1.0e+0
 2221 0caa 01E0     		b	.L95
 2222              	.L94:
 2223              		.loc 1 304 44 discriminator 2
 2224 0cac 9FED7B7A 		vldr.32	s14, .L111
 2225              	.L95:
 2226              		.loc 1 304 59 is_stmt 1 discriminator 4
 2227 0cb0 07F5EC73 		add	r3, r7, #472
 2228 0cb4 A3F5E271 		sub	r1, r3, #452
 2229 0cb8 D7F87421 		ldr	r2, [r7, #372]
 2230 0cbc 1346     		mov	r3, r2
 2231 0cbe 5B00     		lsls	r3, r3, #1
 2232 0cc0 1344     		add	r3, r3, r2
 2233 0cc2 D7F87021 		ldr	r2, [r7, #368]
 2234 0cc6 1344     		add	r3, r3, r2
 2235 0cc8 9B00     		lsls	r3, r3, #2
 2236 0cca 0B44     		add	r3, r3, r1
 2237 0ccc D3ED007A 		vldr.32	s15, [r3]
 2238              		.loc 1 304 52 discriminator 4
 2239 0cd0 77EE677A 		vsub.f32	s15, s14, s15
 2240              		.loc 1 304 27 discriminator 4
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 47


 2241 0cd4 07F5EC73 		add	r3, r7, #472
 2242 0cd8 A3F5D071 		sub	r1, r3, #416
 2243 0cdc D7F87421 		ldr	r2, [r7, #372]
 2244 0ce0 1346     		mov	r3, r2
 2245 0ce2 5B00     		lsls	r3, r3, #1
 2246 0ce4 1344     		add	r3, r3, r2
 2247 0ce6 D7F87021 		ldr	r2, [r7, #368]
 2248 0cea 1344     		add	r3, r3, r2
 2249 0cec 9B00     		lsls	r3, r3, #2
 2250 0cee 0B44     		add	r3, r3, r1
 2251 0cf0 C3ED007A 		vstr.32	s15, [r3]
 299:Core/Src/kalman.c ****                 KH[i][j] = 0.0f;
 2252              		.loc 1 299 37 discriminator 4
 2253 0cf4 D7F87031 		ldr	r3, [r7, #368]
 2254 0cf8 0133     		adds	r3, r3, #1
 2255 0cfa C7F87031 		str	r3, [r7, #368]
 2256              	.L91:
 299:Core/Src/kalman.c ****                 KH[i][j] = 0.0f;
 2257              		.loc 1 299 31 discriminator 2
 2258 0cfe D7F87031 		ldr	r3, [r7, #368]
 2259 0d02 022B     		cmp	r3, #2
 2260 0d04 7FF76AAF 		ble	.L96
 2261              	.LBE39:
 298:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2262              		.loc 1 298 33 discriminator 2
 2263 0d08 D7F87431 		ldr	r3, [r7, #372]
 2264 0d0c 0133     		adds	r3, r3, #1
 2265 0d0e C7F87431 		str	r3, [r7, #372]
 2266              	.L90:
 298:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2267              		.loc 1 298 27 discriminator 1
 2268 0d12 D7F87431 		ldr	r3, [r7, #372]
 2269 0d16 022B     		cmp	r3, #2
 2270 0d18 7FF75CAF 		ble	.L97
 2271              	.LBE38:
 2272              	.LBB41:
 305:Core/Src/kalman.c ****             }
 306:Core/Src/kalman.c ****         }
 307:Core/Src/kalman.c **** 
 308:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 2273              		.loc 1 308 18
 2274 0d1c 0023     		movs	r3, #0
 2275 0d1e C7F86831 		str	r3, [r7, #360]
 2276              		.loc 1 308 9
 2277 0d22 76E0     		b	.L98
 2278              	.L103:
 2279              	.LBB42:
 309:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2280              		.loc 1 309 22
 2281 0d24 0023     		movs	r3, #0
 2282 0d26 C7F86431 		str	r3, [r7, #356]
 2283              		.loc 1 309 13
 2284 0d2a 69E0     		b	.L99
 2285              	.L102:
 310:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 2286              		.loc 1 310 28
 2287 0d2c 07F5EC73 		add	r3, r7, #472
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 48


 2288 0d30 A3F5BE71 		sub	r1, r3, #380
 2289 0d34 D7F86821 		ldr	r2, [r7, #360]
 2290 0d38 1346     		mov	r3, r2
 2291 0d3a 5B00     		lsls	r3, r3, #1
 2292 0d3c 1344     		add	r3, r3, r2
 2293 0d3e D7F86421 		ldr	r2, [r7, #356]
 2294 0d42 1344     		add	r3, r3, r2
 2295 0d44 9B00     		lsls	r3, r3, #2
 2296 0d46 0B44     		add	r3, r3, r1
 2297 0d48 4FF00002 		mov	r2, #0
 2298 0d4c 1A60     		str	r2, [r3]	@ float
 2299              	.LBB43:
 311:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 2300              		.loc 1 311 26
 2301 0d4e 0023     		movs	r3, #0
 2302 0d50 C7F86031 		str	r3, [r7, #352]
 2303              		.loc 1 311 17
 2304 0d54 4BE0     		b	.L100
 2305              	.L101:
 312:Core/Src/kalman.c ****                     Pnew[i][j] += IKH[i][k] * kf->P[k][j];
 2306              		.loc 1 312 28 discriminator 3
 2307 0d56 07F5EC73 		add	r3, r7, #472
 2308 0d5a A3F5BE71 		sub	r1, r3, #380
 2309 0d5e D7F86821 		ldr	r2, [r7, #360]
 2310 0d62 1346     		mov	r3, r2
 2311 0d64 5B00     		lsls	r3, r3, #1
 2312 0d66 1344     		add	r3, r3, r2
 2313 0d68 D7F86421 		ldr	r2, [r7, #356]
 2314 0d6c 1344     		add	r3, r3, r2
 2315 0d6e 9B00     		lsls	r3, r3, #2
 2316 0d70 0B44     		add	r3, r3, r1
 2317 0d72 93ED007A 		vldr.32	s14, [r3]
 2318              		.loc 1 312 41 discriminator 3
 2319 0d76 07F5EC73 		add	r3, r7, #472
 2320 0d7a A3F5D071 		sub	r1, r3, #416
 2321 0d7e D7F86821 		ldr	r2, [r7, #360]
 2322 0d82 1346     		mov	r3, r2
 2323 0d84 5B00     		lsls	r3, r3, #1
 2324 0d86 1344     		add	r3, r3, r2
 2325 0d88 D7F86021 		ldr	r2, [r7, #352]
 2326 0d8c 1344     		add	r3, r3, r2
 2327 0d8e 9B00     		lsls	r3, r3, #2
 2328 0d90 0B44     		add	r3, r3, r1
 2329 0d92 D3ED006A 		vldr.32	s13, [r3]
 2330              		.loc 1 312 55 discriminator 3
 2331 0d96 07F5EC73 		add	r3, r7, #472
 2332 0d9a A3F5E673 		sub	r3, r3, #460
 2333 0d9e 1968     		ldr	r1, [r3]
 2334 0da0 D7F86021 		ldr	r2, [r7, #352]
 2335 0da4 1346     		mov	r3, r2
 2336 0da6 5B00     		lsls	r3, r3, #1
 2337 0da8 1344     		add	r3, r3, r2
 2338 0daa D7F86421 		ldr	r2, [r7, #356]
 2339 0dae 1344     		add	r3, r3, r2
 2340 0db0 0233     		adds	r3, r3, #2
 2341 0db2 9B00     		lsls	r3, r3, #2
 2342 0db4 0B44     		add	r3, r3, r1
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 49


 2343 0db6 0433     		adds	r3, r3, #4
 2344 0db8 D3ED007A 		vldr.32	s15, [r3]
 2345              		.loc 1 312 45 discriminator 3
 2346 0dbc 66EEA77A 		vmul.f32	s15, s13, s15
 2347              		.loc 1 312 32 discriminator 3
 2348 0dc0 77EE277A 		vadd.f32	s15, s14, s15
 2349 0dc4 07F5EC73 		add	r3, r7, #472
 2350 0dc8 A3F5BE71 		sub	r1, r3, #380
 2351 0dcc D7F86821 		ldr	r2, [r7, #360]
 2352 0dd0 1346     		mov	r3, r2
 2353 0dd2 5B00     		lsls	r3, r3, #1
 2354 0dd4 1344     		add	r3, r3, r2
 2355 0dd6 D7F86421 		ldr	r2, [r7, #356]
 2356 0dda 1344     		add	r3, r3, r2
 2357 0ddc 9B00     		lsls	r3, r3, #2
 2358 0dde 0B44     		add	r3, r3, r1
 2359 0de0 C3ED007A 		vstr.32	s15, [r3]
 311:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 2360              		.loc 1 311 41 discriminator 3
 2361 0de4 D7F86031 		ldr	r3, [r7, #352]
 2362 0de8 0133     		adds	r3, r3, #1
 2363 0dea C7F86031 		str	r3, [r7, #352]
 2364              	.L100:
 311:Core/Src/kalman.c ****                 for (int k = 0; k < 3; k++) {
 2365              		.loc 1 311 35 discriminator 1
 2366 0dee D7F86031 		ldr	r3, [r7, #352]
 2367 0df2 022B     		cmp	r3, #2
 2368 0df4 AFDD     		ble	.L101
 2369              	.LBE43:
 309:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 2370              		.loc 1 309 37 discriminator 2
 2371 0df6 D7F86431 		ldr	r3, [r7, #356]
 2372 0dfa 0133     		adds	r3, r3, #1
 2373 0dfc C7F86431 		str	r3, [r7, #356]
 2374              	.L99:
 309:Core/Src/kalman.c ****                 Pnew[i][j] = 0.0f;
 2375              		.loc 1 309 31 discriminator 1
 2376 0e00 D7F86431 		ldr	r3, [r7, #356]
 2377 0e04 022B     		cmp	r3, #2
 2378 0e06 91DD     		ble	.L102
 2379              	.LBE42:
 308:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2380              		.loc 1 308 33 discriminator 2
 2381 0e08 D7F86831 		ldr	r3, [r7, #360]
 2382 0e0c 0133     		adds	r3, r3, #1
 2383 0e0e C7F86831 		str	r3, [r7, #360]
 2384              	.L98:
 308:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2385              		.loc 1 308 27 discriminator 1
 2386 0e12 D7F86831 		ldr	r3, [r7, #360]
 2387 0e16 022B     		cmp	r3, #2
 2388 0e18 84DD     		ble	.L103
 2389              	.LBE41:
 2390              	.LBB44:
 313:Core/Src/kalman.c ****                 }
 314:Core/Src/kalman.c ****             }
 315:Core/Src/kalman.c ****         }
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 50


 316:Core/Src/kalman.c **** 
 317:Core/Src/kalman.c ****         for (int i = 0; i < 3; i++) {
 2391              		.loc 1 317 18
 2392 0e1a 0023     		movs	r3, #0
 2393 0e1c C7F85C31 		str	r3, [r7, #348]
 2394              		.loc 1 317 9
 2395 0e20 32E0     		b	.L104
 2396              	.L107:
 2397              	.LBB45:
 318:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2398              		.loc 1 318 22
 2399 0e22 0023     		movs	r3, #0
 2400 0e24 C7F85831 		str	r3, [r7, #344]
 2401              		.loc 1 318 13
 2402 0e28 25E0     		b	.L105
 2403              	.L106:
 319:Core/Src/kalman.c ****                 kf->P[i][j] = Pnew[i][j];
 2404              		.loc 1 319 38 discriminator 3
 2405 0e2a 07F5EC73 		add	r3, r7, #472
 2406 0e2e A3F5BE71 		sub	r1, r3, #380
 2407 0e32 D7F85C21 		ldr	r2, [r7, #348]
 2408 0e36 1346     		mov	r3, r2
 2409 0e38 5B00     		lsls	r3, r3, #1
 2410 0e3a 1344     		add	r3, r3, r2
 2411 0e3c D7F85821 		ldr	r2, [r7, #344]
 2412 0e40 1344     		add	r3, r3, r2
 2413 0e42 9B00     		lsls	r3, r3, #2
 2414 0e44 0B44     		add	r3, r3, r1
 2415 0e46 1968     		ldr	r1, [r3]	@ float
 2416              		.loc 1 319 29 discriminator 3
 2417 0e48 07F5EC73 		add	r3, r7, #472
 2418 0e4c A3F5E673 		sub	r3, r3, #460
 2419 0e50 1868     		ldr	r0, [r3]
 2420 0e52 D7F85C21 		ldr	r2, [r7, #348]
 2421 0e56 1346     		mov	r3, r2
 2422 0e58 5B00     		lsls	r3, r3, #1
 2423 0e5a 1344     		add	r3, r3, r2
 2424 0e5c D7F85821 		ldr	r2, [r7, #344]
 2425 0e60 1344     		add	r3, r3, r2
 2426 0e62 0233     		adds	r3, r3, #2
 2427 0e64 9B00     		lsls	r3, r3, #2
 2428 0e66 0344     		add	r3, r3, r0
 2429 0e68 0433     		adds	r3, r3, #4
 2430 0e6a 1960     		str	r1, [r3]	@ float
 318:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2431              		.loc 1 318 37 discriminator 3
 2432 0e6c D7F85831 		ldr	r3, [r7, #344]
 2433 0e70 0133     		adds	r3, r3, #1
 2434 0e72 C7F85831 		str	r3, [r7, #344]
 2435              	.L105:
 318:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2436              		.loc 1 318 31 discriminator 1
 2437 0e76 D7F85831 		ldr	r3, [r7, #344]
 2438 0e7a 022B     		cmp	r3, #2
 2439 0e7c D5DD     		ble	.L106
 2440              	.LBE45:
 317:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 51


 2441              		.loc 1 317 33 discriminator 2
 2442 0e7e D7F85C31 		ldr	r3, [r7, #348]
 2443 0e82 0133     		adds	r3, r3, #1
 2444 0e84 C7F85C31 		str	r3, [r7, #348]
 2445              	.L104:
 317:Core/Src/kalman.c ****             for (int j = 0; j < 3; j++) {
 2446              		.loc 1 317 27 discriminator 1
 2447 0e88 D7F85C31 		ldr	r3, [r7, #348]
 2448 0e8c 022B     		cmp	r3, #2
 2449 0e8e C8DD     		ble	.L107
 2450 0e90 00E0     		b	.L35
 2451              	.L108:
 2452              	.LBE44:
 256:Core/Src/kalman.c ****         }
 2453              		.loc 1 256 13
 2454 0e92 00BF     		nop
 2455              	.L35:
 2456              	.LBE23:
 320:Core/Src/kalman.c ****             }
 321:Core/Src/kalman.c ****         }
 322:Core/Src/kalman.c ****     }
 323:Core/Src/kalman.c **** }
 2457              		.loc 1 323 1
 2458 0e94 07F5EC77 		add	r7, r7, #472
 2459              		.cfi_def_cfa_offset 16
 2460 0e98 BD46     		mov	sp, r7
 2461              		.cfi_def_cfa_register 13
 2462              		@ sp needed
 2463 0e9a B0BD     		pop	{r4, r5, r7, pc}
 2464              	.L112:
 2465              		.align	2
 2466              	.L111:
 2467 0e9c 00000000 		.word	0
 2468              		.cfi_endproc
 2469              	.LFE3:
 2471              		.section	.text.KalmanFilter_DetectApogee,"ax",%progbits
 2472              		.align	1
 2473              		.syntax unified
 2474              		.thumb
 2475              		.thumb_func
 2477              	KalmanFilter_DetectApogee:
 2478              	.LFB4:
 324:Core/Src/kalman.c **** 
 325:Core/Src/kalman.c **** /**
 326:Core/Src/kalman.c ****  * @brief Detect apogee based on velocity trend
 327:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
 328:Core/Src/kalman.c ****  * @return 1 if apogee is detected, 0 otherwise
 329:Core/Src/kalman.c ****  */
 330:Core/Src/kalman.c **** static int KalmanFilter_DetectApogee(KalmanFilter_t *kf) {
 2479              		.loc 1 330 58
 2480              		.cfi_startproc
 2481              		@ args = 0, pretend = 0, frame = 8
 2482              		@ frame_needed = 1, uses_anonymous_args = 0
 2483              		@ link register save eliminated.
 2484 0000 80B4     		push	{r7}
 2485              		.cfi_def_cfa_offset 4
 2486              		.cfi_offset 7, -4
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 52


 2487 0002 83B0     		sub	sp, sp, #12
 2488              		.cfi_def_cfa_offset 16
 2489 0004 00AF     		add	r7, sp, #0
 2490              		.cfi_def_cfa_register 7
 2491 0006 7860     		str	r0, [r7, #4]
 331:Core/Src/kalman.c ****     // Velocity is negative and magnitude is increasing
 332:Core/Src/kalman.c **** 	if(kf->x[2] > 30.0){
 333:Core/Src/kalman.c **** 
 334:Core/Src/kalman.c **** 
 335:Core/Src/kalman.c **** 	}
 336:Core/Src/kalman.c ****     if (kf->x[1] < 0.0f && kf->x[1] < kf->prev_velocity) {
 2492              		.loc 1 336 14
 2493 0008 7B68     		ldr	r3, [r7, #4]
 2494 000a D3ED017A 		vldr.32	s15, [r3, #4]
 2495              		.loc 1 336 8
 2496 000e F5EEC07A 		vcmpe.f32	s15, #0
 2497 0012 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 2498 0016 17D5     		bpl	.L114
 2499              		.loc 1 336 33 discriminator 1
 2500 0018 7B68     		ldr	r3, [r7, #4]
 2501 001a 93ED017A 		vldr.32	s14, [r3, #4]
 2502              		.loc 1 336 41 discriminator 1
 2503 001e 7B68     		ldr	r3, [r7, #4]
 2504 0020 D3ED117A 		vldr.32	s15, [r3, #68]
 2505              		.loc 1 336 25 discriminator 1
 2506 0024 B4EEE77A 		vcmpe.f32	s14, s15
 2507 0028 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 2508 002c 0CD5     		bpl	.L114
 337:Core/Src/kalman.c ****         kf->apogee_counter++;
 2509              		.loc 1 337 11
 2510 002e 7B68     		ldr	r3, [r7, #4]
 2511 0030 1B6C     		ldr	r3, [r3, #64]
 2512              		.loc 1 337 27
 2513 0032 5A1C     		adds	r2, r3, #1
 2514 0034 7B68     		ldr	r3, [r7, #4]
 2515 0036 1A64     		str	r2, [r3, #64]
 338:Core/Src/kalman.c ****         if (kf->apogee_counter >= 5) {  // Confirm apogee after 5 consecutive samples
 2516              		.loc 1 338 15
 2517 0038 7B68     		ldr	r3, [r7, #4]
 2518 003a 1B6C     		ldr	r3, [r3, #64]
 2519              		.loc 1 338 12
 2520 003c 042B     		cmp	r3, #4
 2521 003e 06DD     		ble	.L118
 339:Core/Src/kalman.c ****             kf->apogee_detected = 1;
 2522              		.loc 1 339 33
 2523 0040 7B68     		ldr	r3, [r7, #4]
 2524 0042 0122     		movs	r2, #1
 2525 0044 DA63     		str	r2, [r3, #60]
 338:Core/Src/kalman.c ****         if (kf->apogee_counter >= 5) {  // Confirm apogee after 5 consecutive samples
 2526              		.loc 1 338 12
 2527 0046 02E0     		b	.L118
 2528              	.L114:
 340:Core/Src/kalman.c ****         }
 341:Core/Src/kalman.c ****     } else {
 342:Core/Src/kalman.c ****         kf->apogee_counter = 0;
 2529              		.loc 1 342 28
 2530 0048 7B68     		ldr	r3, [r7, #4]
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 53


 2531 004a 0022     		movs	r2, #0
 2532 004c 1A64     		str	r2, [r3, #64]
 2533              	.L118:
 343:Core/Src/kalman.c ****     }
 344:Core/Src/kalman.c **** 
 345:Core/Src/kalman.c ****     kf->prev_velocity = kf->x[1];
 2534              		.loc 1 345 30
 2535 004e 7B68     		ldr	r3, [r7, #4]
 2536 0050 5A68     		ldr	r2, [r3, #4]	@ float
 2537              		.loc 1 345 23
 2538 0052 7B68     		ldr	r3, [r7, #4]
 2539 0054 5A64     		str	r2, [r3, #68]	@ float
 346:Core/Src/kalman.c ****     return kf->apogee_detected;
 2540              		.loc 1 346 14
 2541 0056 7B68     		ldr	r3, [r7, #4]
 2542 0058 DB6B     		ldr	r3, [r3, #60]
 347:Core/Src/kalman.c **** }
 2543              		.loc 1 347 1
 2544 005a 1846     		mov	r0, r3
 2545 005c 0C37     		adds	r7, r7, #12
 2546              		.cfi_def_cfa_offset 4
 2547 005e BD46     		mov	sp, r7
 2548              		.cfi_def_cfa_register 13
 2549              		@ sp needed
 2550 0060 5DF8047B 		ldr	r7, [sp], #4
 2551              		.cfi_restore 7
 2552              		.cfi_def_cfa_offset 0
 2553 0064 7047     		bx	lr
 2554              		.cfi_endproc
 2555              	.LFE4:
 2557              		.section	.text.Kalman_Get_Velocity,"ax",%progbits
 2558              		.align	1
 2559              		.global	Kalman_Get_Velocity
 2560              		.syntax unified
 2561              		.thumb
 2562              		.thumb_func
 2564              	Kalman_Get_Velocity:
 2565              	.LFB5:
 348:Core/Src/kalman.c **** float Kalman_Get_Velocity(KalmanFilter_t *kf){
 2566              		.loc 1 348 46
 2567              		.cfi_startproc
 2568              		@ args = 0, pretend = 0, frame = 8
 2569              		@ frame_needed = 1, uses_anonymous_args = 0
 2570              		@ link register save eliminated.
 2571 0000 80B4     		push	{r7}
 2572              		.cfi_def_cfa_offset 4
 2573              		.cfi_offset 7, -4
 2574 0002 83B0     		sub	sp, sp, #12
 2575              		.cfi_def_cfa_offset 16
 2576 0004 00AF     		add	r7, sp, #0
 2577              		.cfi_def_cfa_register 7
 2578 0006 7860     		str	r0, [r7, #4]
 349:Core/Src/kalman.c **** 	return kf->x[1];
 2579              		.loc 1 349 14
 2580 0008 7B68     		ldr	r3, [r7, #4]
 2581 000a 5B68     		ldr	r3, [r3, #4]	@ float
 2582 000c 07EE903A 		vmov	s15, r3
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 54


 350:Core/Src/kalman.c **** }
 2583              		.loc 1 350 1
 2584 0010 B0EE670A 		vmov.f32	s0, s15
 2585 0014 0C37     		adds	r7, r7, #12
 2586              		.cfi_def_cfa_offset 4
 2587 0016 BD46     		mov	sp, r7
 2588              		.cfi_def_cfa_register 13
 2589              		@ sp needed
 2590 0018 5DF8047B 		ldr	r7, [sp], #4
 2591              		.cfi_restore 7
 2592              		.cfi_def_cfa_offset 0
 2593 001c 7047     		bx	lr
 2594              		.cfi_endproc
 2595              	.LFE5:
 2597              		.section	.text.KalmanFilter_IsApogeeDetected,"ax",%progbits
 2598              		.align	1
 2599              		.global	KalmanFilter_IsApogeeDetected
 2600              		.syntax unified
 2601              		.thumb
 2602              		.thumb_func
 2604              	KalmanFilter_IsApogeeDetected:
 2605              	.LFB6:
 351:Core/Src/kalman.c **** /**
 352:Core/Src/kalman.c ****  * @brief Check if apogee has been detected
 353:Core/Src/kalman.c ****  * @param kf Pointer to Kalman filter structure
 354:Core/Src/kalman.c ****  * @return 1 if apogee is detected, 0 otherwise
 355:Core/Src/kalman.c ****  */
 356:Core/Src/kalman.c **** int KalmanFilter_IsApogeeDetected(KalmanFilter_t *kf) {
 2606              		.loc 1 356 55
 2607              		.cfi_startproc
 2608              		@ args = 0, pretend = 0, frame = 8
 2609              		@ frame_needed = 1, uses_anonymous_args = 0
 2610              		@ link register save eliminated.
 2611 0000 80B4     		push	{r7}
 2612              		.cfi_def_cfa_offset 4
 2613              		.cfi_offset 7, -4
 2614 0002 83B0     		sub	sp, sp, #12
 2615              		.cfi_def_cfa_offset 16
 2616 0004 00AF     		add	r7, sp, #0
 2617              		.cfi_def_cfa_register 7
 2618 0006 7860     		str	r0, [r7, #4]
 357:Core/Src/kalman.c ****     return kf->apogee_detected;
 2619              		.loc 1 357 14
 2620 0008 7B68     		ldr	r3, [r7, #4]
 2621 000a DB6B     		ldr	r3, [r3, #60]
 358:Core/Src/kalman.c **** }
 2622              		.loc 1 358 1
 2623 000c 1846     		mov	r0, r3
 2624 000e 0C37     		adds	r7, r7, #12
 2625              		.cfi_def_cfa_offset 4
 2626 0010 BD46     		mov	sp, r7
 2627              		.cfi_def_cfa_register 13
 2628              		@ sp needed
 2629 0012 5DF8047B 		ldr	r7, [sp], #4
 2630              		.cfi_restore 7
 2631              		.cfi_def_cfa_offset 0
 2632 0016 7047     		bx	lr
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 55


 2633              		.cfi_endproc
 2634              	.LFE6:
 2636              		.text
 2637              	.Letext0:
 2638              		.file 2 "Core/Inc/kalman.h"
ARM GAS  C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s 			page 56


DEFINED SYMBOLS
                            *ABS*:00000000 kalman.c
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:21     .text.KalmanFilter_Init:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:27     .text.KalmanFilter_Init:00000000 KalmanFilter_Init
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:156    .text.KalmanFilter_Init:000000b0 $d
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:164    .text.KalmanFilter_Update:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:170    .text.KalmanFilter_Update:00000000 KalmanFilter_Update
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:257    .text.KalmanFilter_TimeUpdate:00000000 KalmanFilter_TimeUpdate
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:772    .text.KalmanFilter_MeasurementUpdate:00000000 KalmanFilter_MeasurementUpdate
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2477   .text.KalmanFilter_DetectApogee:00000000 KalmanFilter_DetectApogee
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:246    .text.KalmanFilter_Update:00000084 $d
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:252    .text.KalmanFilter_TimeUpdate:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:758    .rodata:00000000 $d
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:767    .text.KalmanFilter_MeasurementUpdate:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:1489   .text.KalmanFilter_MeasurementUpdate:0000061c $d
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:1494   .text.KalmanFilter_MeasurementUpdate:00000628 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2467   .text.KalmanFilter_MeasurementUpdate:00000e9c $d
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2472   .text.KalmanFilter_DetectApogee:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2558   .text.Kalman_Get_Velocity:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2564   .text.Kalman_Get_Velocity:00000000 Kalman_Get_Velocity
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2598   .text.KalmanFilter_IsApogeeDetected:00000000 $t
C:\Users\Halil\AppData\Local\Temp\ccr9SUC8.s:2604   .text.KalmanFilter_IsApogeeDetected:00000000 KalmanFilter_IsApogeeDetected
                           .group:00000000 wm4.0.fbeba72283fbbed79c5ed62adcf8946b
                           .group:00000000 wm4._newlib_version.h.4.6d111ab2e95434b664b53815e5c8ccba
                           .group:00000000 wm4.newlib.h.27.13c3dcbbace0888e13b51843af197034
                           .group:00000000 wm4.ieeefp.h.77.9dc6728f2d488a554e7c0cabef1b6c33
                           .group:00000000 wm4.features.h.22.7877b139107948f7dadcf3660cc79cfd
                           .group:00000000 wm4.config.h.224.10ee1ad185d877c6e334e6581faab44d
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.stddef.h.39.3e0425629195acf083c9561151306b4d
                           .group:00000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:00000000 wm4.stddef.h.158.5f30652bb2ea05b142c1bbee9108c999
                           .group:00000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:00000000 wm4._types.h.127.3bdfe3ff8ea2d0985b03d9cbe93480e3
                           .group:00000000 wm4.reent.h.17.e292bf8b0bec6c96e131a54347145a30
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4.reent.h.77.89f7dde66c62b1f1dee32bdb6ab2d544
                           .group:00000000 wm4.cdefs.h.49.f93868eb904b9ca05b5c0257d31128ca
                           .group:00000000 wm4.math.h.13.35ad80917fddb38312d53499dad31194

UNDEFINED SYMBOLS
memset
